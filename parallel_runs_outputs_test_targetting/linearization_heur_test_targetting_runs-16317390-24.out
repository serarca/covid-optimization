50
(0.5, 0.29, 51.99446069055928, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 18599515.0, 0.05, 2, 'full_open')
The value of T is: 104
90
Total Reward at the start of the inner iterations: 43228384.789569765
Using license file /share/software/user/restricted/gurobi/9.0.3_py36/licenses/gurobi.lic
Set parameter TokenServer to value license4.stanford.edu
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746109 NZs
  Matrix coefficient range    : [ 1.51782e-13, 1 ]
  Objective coefficient range : [ 5.07929e-19, 2.3828e+07 ]
  Variable bound range        : [ 1, 8.37689 ]
  RHS coefficient range       : [ 1.1062e-06, 51.9945 ]
Objective value for Line heur k = 0: -2580977.20560344
90
Actual reward of current solution: 44999501.062134385
Minimum Difference with past solutions:0.05000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746113 NZs
  Matrix coefficient range    : [ 1.27516e-13, 1 ]
  Objective coefficient range : [ 6.1518e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.577716, 10.9766 ]
  RHS coefficient range       : [ 2.28473e-06, 51.9945 ]
Objective value for Line heur k = 0: 4486859.635431265
90
Actual reward of current solution: 46298074.70791963
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746113 NZs
  Matrix coefficient range    : [ 1.0295e-13, 1 ]
  Objective coefficient range : [ 3.59071e-19, 2.3828e+07 ]
  Variable bound range        : [ 1, 13.5763 ]
  RHS coefficient range       : [ 2.93701e-07, 51.9945 ]
Objective value for Line heur k = 0: 9125608.748411037
90
Actual reward of current solution: 46743592.539738365
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 7.36666e-13, 1 ]
  Objective coefficient range : [ 2.29262e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.577716, 16.1761 ]
  RHS coefficient range       : [ 4.0141e-08, 51.9945 ]
Objective value for Line heur k = 0: 10536698.804938586
90
Actual reward of current solution: 46861369.45179978
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 1.49903e-13, 1 ]
  Objective coefficient range : [ 6.92906e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.577716, 18.7758 ]
  RHS coefficient range       : [ 5.06664e-07, 51.9945 ]
Objective value for Line heur k = 0: 10785411.004938485
90
Actual reward of current solution: 46857216.737337105
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8405101 NZs
  Matrix coefficient range    : [ 2.07052e-12, 1 ]
  Objective coefficient range : [ 9.32469e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.577716, 21.3755 ]
  RHS coefficient range       : [ 3.86767e-07, 51.9945 ]
Objective value for Line heur k = 0: 10715428.337133285
90
Actual reward of current solution: 46866568.70698043
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.27058e-12, 1 ]
  Objective coefficient range : [ 2.19592e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.288858, 23.9752 ]
  RHS coefficient range       : [ 4.1167e-07, 51.9945 ]
Objective value for Line heur k = 0: 10820131.898773788
90
Actual reward of current solution: 46855447.61087519
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 2.07888e-12, 1 ]
  Objective coefficient range : [ 1.13103e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.577716, 26.5749 ]
  RHS coefficient range       : [ 3.86767e-07, 51.9945 ]
Objective value for Line heur k = 0: 10723261.893572498
90
Actual reward of current solution: 46868107.090807445
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.27057e-12, 1 ]
  Objective coefficient range : [ 8.14589e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.288858, 23.9752 ]
  RHS coefficient range       : [ 4.1167e-07, 51.9945 ]
Objective value for Line heur k = 0: 10813907.429114638
90
Actual reward of current solution: 46859167.98857779
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397159 NZs
  Matrix coefficient range    : [ 2.07805e-12, 1 ]
  Objective coefficient range : [ 1.97311e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.577716, 26.5749 ]
  RHS coefficient range       : [ 3.86767e-07, 51.9945 ]
Objective value for Line heur k = 0: 10710746.579424044
90
Actual reward of current solution: 46867115.552359164
Minimum Difference with past solutions:0.05000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.27062e-12, 1 ]
  Objective coefficient range : [ 7.01348e-18, 2.3828e+07 ]
  Variable bound range        : [ 8.88178e-16, 29.1747 ]
  RHS coefficient range       : [ 4.1167e-07, 51.9945 ]
Objective value for Line heur k = 0: 10826063.72163772
90
Actual reward of current solution: 46859167.98857779
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397159 NZs
  Matrix coefficient range    : [ 2.07805e-12, 1 ]
  Objective coefficient range : [ 1.6478e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.577716, 31.7744 ]
  RHS coefficient range       : [ 3.86767e-07, 51.9945 ]
Objective value for Line heur k = 0: 10710746.579424044
90
Actual reward of current solution: 46867115.552359164
Minimum Difference with past solutions:0.05000000000000013.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.27062e-12, 1 ]
  Objective coefficient range : [ 2.61557e-18, 2.3828e+07 ]
  Variable bound range        : [ 8.88178e-16, 29.1747 ]
  RHS coefficient range       : [ 4.1167e-07, 51.9945 ]
Objective value for Line heur k = 0: 10826063.72163772
90
Actual reward of current solution: 46859167.98857779
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397159 NZs
  Matrix coefficient range    : [ 2.07805e-12, 1 ]
  Objective coefficient range : [ 4.52595e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.577716, 26.5749 ]
  RHS coefficient range       : [ 3.86767e-07, 51.9945 ]
Objective value for Line heur k = 0: 10710746.579424042
90
Actual reward of current solution: 46867115.55235916
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.27062e-12, 1 ]
  Objective coefficient range : [ 7.35609e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.288858, 29.1747 ]
  RHS coefficient range       : [ 4.1167e-07, 51.9945 ]
Objective value for Line heur k = 0: 10826063.721637717
90
Actual reward of current solution: 46859167.98857779
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397159 NZs
  Matrix coefficient range    : [ 2.07805e-12, 1 ]
  Objective coefficient range : [ 1.50877e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.577716, 31.7744 ]
  RHS coefficient range       : [ 3.86767e-07, 51.9945 ]
Objective value for Line heur k = 0: 10710746.579424042
90
Actual reward of current solution: 46867115.55235916
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.27062e-12, 1 ]
  Objective coefficient range : [ 5.4359e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.288858, 34.3741 ]
  RHS coefficient range       : [ 4.1167e-07, 51.9945 ]
Objective value for Line heur k = 0: 10826063.721637717
90
Actual reward of current solution: 46859167.98857779
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397159 NZs
  Matrix coefficient range    : [ 2.07805e-12, 1 ]
  Objective coefficient range : [ 1.50877e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.577716, 36.9738 ]
  RHS coefficient range       : [ 3.86767e-07, 51.9945 ]
Objective value for Line heur k = 0: 10710746.579424042
90
Actual reward of current solution: 46867115.55235916
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.27062e-12, 1 ]
  Objective coefficient range : [ 4.29853e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.288858, 39.5736 ]
  RHS coefficient range       : [ 4.1167e-07, 51.9945 ]
Objective value for Line heur k = 0: 10826063.721637717
90
Actual reward of current solution: 46859167.98857779
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397159 NZs
  Matrix coefficient range    : [ 2.07805e-12, 1 ]
  Objective coefficient range : [ 1.50877e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.577716, 36.9738 ]
  RHS coefficient range       : [ 3.86767e-07, 51.9945 ]
Objective value for Line heur k = 0: 10710746.579424044
90
Actual reward of current solution: 46867115.55235916
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.27062e-12, 1 ]
  Objective coefficient range : [ 3.74254e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.288858, 39.5736 ]
  RHS coefficient range       : [ 4.1167e-07, 51.9945 ]
Objective value for Line heur k = 0: 10826063.72163772
90
Actual reward of current solution: 46859167.98857779
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397159 NZs
  Matrix coefficient range    : [ 2.07805e-12, 1 ]
  Objective coefficient range : [ 1.50877e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.577716, 42.1733 ]
  RHS coefficient range       : [ 3.86767e-07, 51.9945 ]
Objective value for Line heur k = 0: 10710746.57942404
90
Actual reward of current solution: 46867115.55235916
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.27062e-12, 1 ]
  Objective coefficient range : [ 3.84733e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.288858, 44.773 ]
  RHS coefficient range       : [ 4.1167e-07, 51.9945 ]
Objective value for Line heur k = 0: 10826063.72163772
Traceback (most recent call last):
  File "run_linearization_heuristic_test_targetting_value.py", line 541, in <module>
    main()
  File "run_linearization_heuristic_test_targetting_value.py", line 145, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 184, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 325, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, False, 0.1,optimizeLockdowns)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1985, in run_heuristic_linearization
    Xhat_seq, uhat_seq = get_X_hat_sequence(dynModel, k, uhat_seq, use_bounce_var)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 463, in get_X_hat_sequence
    dynModel.take_time_step(m_tests, a_tests, alphas, BH, BICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 158, in take_time_step
    self.groups[n].take_time_step(m_tests[n], a_tests[n], self.beds, self.icus, B_H[n], B_ICU[n])
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 600, in take_time_step
    self.update_I(m_tests, a_tests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 684, in update_I
    assert self.I[self.parent.t]+delta_I*self.dt >= 0, (f'Total infected is negative: {self.I[self.parent.t]+delta_I*self.dt}. \n Infected time t: {self.I[self.parent.t]}. \n Delta I: {delta_I}.\n Total N time t: {self.N[self.parent.t]}.\n Total E time t: {self.E[self.parent.t]}.\n M tests at time t: {m_tests}.\n Total m_tests: {m_tests * self.dt * self.I[self.parent.t]/self.N[self.parent.t]}.\n  Total new infected: {self.dt * self.parameters["sigma"]*self.E[self.parent.t]}.\n  Total recovered or going to H, ICU: {self.dt * self.parameters["mu"]*self.I[self.parent.t]}')
AssertionError: Total infected is negative: -0.0003088999392947371. 
 Infected time t: 0.016377520508007. 
 Delta I: -0.016686420447301738.
 Total N time t: 52.35112710353486.
 Total E time t: 0.005658968929445853.
 M tests at time t: 44.77300781687049.
 Total m_tests: 0.014006782552661452.
  Total new infected: 0.0014147422323614633.
  Total recovered or going to H, ICU: 0.00409438012700175
srun: error: sh02-01n37: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=16317437.0
