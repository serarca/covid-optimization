50
(0.5, 0.29, 43.34959855164701, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 18599515.0, 0.05, 2, 'full_open')
The value of T is: 104
90
Total Reward at the start of the inner iterations: 41430100.38444504
Using license file /share/software/user/restricted/gurobi/9.0.3_py36/licenses/gurobi.lic
Set parameter TokenServer to value license4.stanford.edu
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746104 NZs
  Matrix coefficient range    : [ 1.10172e-13, 1 ]
  Objective coefficient range : [ 9.3251e-18, 2.3828e+07 ]
  Variable bound range        : [ 1, 6.9841 ]
  RHS coefficient range       : [ 4.68061e-08, 43.3496 ]
Objective value for Line heur k = 0: -8656160.451704001
90
Actual reward of current solution: 43489142.34776719
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746113 NZs
  Matrix coefficient range    : [ 2.8667e-13, 1 ]
  Objective coefficient range : [ 4.80294e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 9.15158 ]
  RHS coefficient range       : [ 1.09177e-06, 43.3496 ]
Objective value for Line heur k = 0: -2165601.9145280225
90
Actual reward of current solution: 44784522.19952362
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746107 NZs
  Matrix coefficient range    : [ 1.00157e-13, 1 ]
  Objective coefficient range : [ 2.63891e-19, 2.3828e+07 ]
  Variable bound range        : [ 1, 11.3191 ]
  RHS coefficient range       : [ 1.87069e-06, 43.3496 ]
Objective value for Line heur k = 0: 2375319.3209680202
90
Actual reward of current solution: 45263257.27709288
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 5.9758e-13, 1 ]
  Objective coefficient range : [ 6.54603e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 13.4865 ]
  RHS coefficient range       : [ 2.19845e-06, 43.3496 ]
Objective value for Line heur k = 0: 3935338.718401194
90
Actual reward of current solution: 45412917.77336558
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463924 NZs
  Matrix coefficient range    : [ 1.69587e-13, 1 ]
  Objective coefficient range : [ 1.14081e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 15.654 ]
  RHS coefficient range       : [ 2.04559e-06, 43.3496 ]
Objective value for Line heur k = 0: 4324776.791726377
90
Actual reward of current solution: 45449976.643112354
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 3.27483e-13, 1 ]
  Objective coefficient range : [ 2.11506e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 17.8215 ]
  RHS coefficient range       : [ 1.8779e-06, 43.3496 ]
Objective value for Line heur k = 0: 4284791.971017708
90
Actual reward of current solution: 45433372.12532393
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 2.61554e-13, 1 ]
  Objective coefficient range : [ 8.48507e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 19.989 ]
  RHS coefficient range       : [ 2.06607e-06, 43.3496 ]
Objective value for Line heur k = 0: 4300821.443315153
90
Actual reward of current solution: 45453772.697353676
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8368924 NZs
  Matrix coefficient range    : [ 2.85983e-13, 1 ]
  Objective coefficient range : [ 2.63944e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 22.1565 ]
  RHS coefficient range       : [ 1.8779e-06, 43.3496 ]
Objective value for Line heur k = 0: 4283428.934837306
90
Actual reward of current solution: 45434659.97406862
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397158 NZs
  Matrix coefficient range    : [ 6.82358e-13, 1 ]
  Objective coefficient range : [ 3.11971e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 19.989 ]
  RHS coefficient range       : [ 2.06607e-06, 43.3496 ]
Objective value for Line heur k = 0: 4294839.867691176
90
Actual reward of current solution: 45453772.697353676
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8368924 NZs
  Matrix coefficient range    : [ 2.85983e-13, 1 ]
  Objective coefficient range : [ 3.83697e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 22.1565 ]
  RHS coefficient range       : [ 1.8779e-06, 43.3496 ]
Objective value for Line heur k = 0: 4283428.934837306
90
Actual reward of current solution: 45434659.97406862
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397158 NZs
  Matrix coefficient range    : [ 6.82358e-13, 1 ]
  Objective coefficient range : [ 3.11971e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 19.989 ]
  RHS coefficient range       : [ 2.06607e-06, 43.3496 ]
Objective value for Line heur k = 0: 4294839.867691176
90
Actual reward of current solution: 45453772.697353676
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8368924 NZs
  Matrix coefficient range    : [ 2.85983e-13, 1 ]
  Objective coefficient range : [ 3.83697e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 22.1565 ]
  RHS coefficient range       : [ 1.8779e-06, 43.3496 ]
Objective value for Line heur k = 0: 4283428.934837306
90
Actual reward of current solution: 45434659.97406862
Minimum Difference with past solutions:0.011111111111111092.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397158 NZs
  Matrix coefficient range    : [ 6.82358e-13, 1 ]
  Objective coefficient range : [ 2.87197e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 19.989 ]
  RHS coefficient range       : [ 2.06607e-06, 43.3496 ]
Objective value for Line heur k = 0: 4294839.867691176
90
Actual reward of current solution: 45453772.697353676
Minimum Difference with past solutions:0.0.
New solution equals old solution at k=0
89
Total Reward at the start of the inner iterations: 45453772.697353676
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8202864 NZs
  Matrix coefficient range    : [ 2.85983e-13, 1 ]
  Objective coefficient range : [ 2.63944e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 22.1565 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4604515.88402178
89
Actual reward of current solution: 45444839.25529995
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8230776 NZs
  Matrix coefficient range    : [ 2.19051e-13, 1 ]
  Objective coefficient range : [ 3.08793e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 19.989 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4635316.295612878
89
Actual reward of current solution: 45453772.697353676
Minimum Difference with past solutions:0.05000000000000008.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8202864 NZs
  Matrix coefficient range    : [ 2.85983e-13, 1 ]
  Objective coefficient range : [ 5.52003e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 22.1565 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4604515.884021779
89
Actual reward of current solution: 45444839.25529995
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8230776 NZs
  Matrix coefficient range    : [ 2.19051e-13, 1 ]
  Objective coefficient range : [ 3.08793e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 19.989 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4635316.295612876
89
Actual reward of current solution: 45453772.697353676
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8202864 NZs
  Matrix coefficient range    : [ 2.85983e-13, 1 ]
  Objective coefficient range : [ 5.01424e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 22.1565 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4604515.884021779
89
Actual reward of current solution: 45444839.25529995
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8230776 NZs
  Matrix coefficient range    : [ 2.19051e-13, 1 ]
  Objective coefficient range : [ 3.08793e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 19.989 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4635316.295612876
89
Actual reward of current solution: 45453772.697353676
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8202864 NZs
  Matrix coefficient range    : [ 2.85983e-13, 1 ]
  Objective coefficient range : [ 5.52003e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 22.1565 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4604515.884021779
89
Actual reward of current solution: 45444839.25529995
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8230776 NZs
  Matrix coefficient range    : [ 2.19051e-13, 1 ]
  Objective coefficient range : [ 3.08793e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 24.3239 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4635316.295612876
89
Actual reward of current solution: 45453772.697353676
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8202864 NZs
  Matrix coefficient range    : [ 2.85983e-13, 1 ]
  Objective coefficient range : [ 5.52003e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 26.4914 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4604515.884021779
89
Actual reward of current solution: 45444839.25529995
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8230776 NZs
  Matrix coefficient range    : [ 2.19051e-13, 1 ]
  Objective coefficient range : [ 3.08793e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 28.6589 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4635316.295612876
89
Actual reward of current solution: 45453772.697353676
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8202864 NZs
  Matrix coefficient range    : [ 2.85983e-13, 1 ]
  Objective coefficient range : [ 5.52003e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 30.8264 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4604515.884021779
89
Actual reward of current solution: 45444839.25529995
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8230776 NZs
  Matrix coefficient range    : [ 2.19051e-13, 1 ]
  Objective coefficient range : [ 3.08793e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 32.9939 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4635316.295612876
89
Actual reward of current solution: 45453772.697353676
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8202864 NZs
  Matrix coefficient range    : [ 2.85983e-13, 1 ]
  Objective coefficient range : [ 5.52003e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 35.1613 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4604515.884021779
89
Actual reward of current solution: 45444839.25529995
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8230776 NZs
  Matrix coefficient range    : [ 2.19051e-13, 1 ]
  Objective coefficient range : [ 3.08793e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 32.9939 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4635316.295612876
89
Actual reward of current solution: 45453772.697353676
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8202864 NZs
  Matrix coefficient range    : [ 2.85983e-13, 1 ]
  Objective coefficient range : [ 5.01424e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 35.1613 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4604515.884021779
89
Actual reward of current solution: 45444839.25529995
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8230776 NZs
  Matrix coefficient range    : [ 2.19051e-13, 1 ]
  Objective coefficient range : [ 3.08793e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 37.3288 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4635316.295612876
89
Actual reward of current solution: 45453772.697353676
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8202864 NZs
  Matrix coefficient range    : [ 2.85983e-13, 1 ]
  Objective coefficient range : [ 5.01424e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 39.4963 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4604515.884021779
89
Actual reward of current solution: 45444839.25529995
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8230776 NZs
  Matrix coefficient range    : [ 2.19051e-13, 1 ]
  Objective coefficient range : [ 3.08793e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 37.3288 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4635316.295612876
89
Actual reward of current solution: 45453772.697353676
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8202864 NZs
  Matrix coefficient range    : [ 2.85983e-13, 1 ]
  Objective coefficient range : [ 5.01424e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 39.4963 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4604515.884021779
89
Actual reward of current solution: 45444839.25529995
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8230776 NZs
  Matrix coefficient range    : [ 2.19051e-13, 1 ]
  Objective coefficient range : [ 3.08793e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 41.6638 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4635316.295612876
89
Actual reward of current solution: 45453772.697353676
Minimum Difference with past solutions:0.050000000000000044.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8202864 NZs
  Matrix coefficient range    : [ 2.85983e-13, 1 ]
  Objective coefficient range : [ 5.01424e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.481662, 43.3496 ]
  RHS coefficient range       : [ 1.51664e-06, 43.3496 ]
Objective value for Line heur k = 1: 4604515.884021779
Traceback (most recent call last):
  File "run_linearization_heuristic_test_targetting_value.py", line 541, in <module>
    main()
  File "run_linearization_heuristic_test_targetting_value.py", line 145, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 184, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 325, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, False, 0.1,optimizeLockdowns)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1985, in run_heuristic_linearization
    Xhat_seq, uhat_seq = get_X_hat_sequence(dynModel, k, uhat_seq, use_bounce_var)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 463, in get_X_hat_sequence
    dynModel.take_time_step(m_tests, a_tests, alphas, BH, BICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 158, in take_time_step
    self.groups[n].take_time_step(m_tests[n], a_tests[n], self.beds, self.icus, B_H[n], B_ICU[n])
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 600, in take_time_step
    self.update_I(m_tests, a_tests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 684, in update_I
    assert self.I[self.parent.t]+delta_I*self.dt >= 0, (f'Total infected is negative: {self.I[self.parent.t]+delta_I*self.dt}. \n Infected time t: {self.I[self.parent.t]}. \n Delta I: {delta_I}.\n Total N time t: {self.N[self.parent.t]}.\n Total E time t: {self.E[self.parent.t]}.\n M tests at time t: {m_tests}.\n Total m_tests: {m_tests * self.dt * self.I[self.parent.t]/self.N[self.parent.t]}.\n  Total new infected: {self.dt * self.parameters["sigma"]*self.E[self.parent.t]}.\n  Total recovered or going to H, ICU: {self.dt * self.parameters["mu"]*self.I[self.parent.t]}')
AssertionError: Total infected is negative: -0.0006329735079561791. 
 Infected time t: 0.030381183680594972. 
 Delta I: -0.03101415718855115.
 Total N time t: 52.206848978548145.
 Total E time t: 0.00723178390845771.
 M tests at time t: 43.34959855164701.
 Total m_tests: 0.025226807245516836.
  Total new infected: 0.0018079459771144276.
  Total recovered or going to H, ICU: 0.007595295920148743
srun: error: sh02-01n48: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=16317414.0
