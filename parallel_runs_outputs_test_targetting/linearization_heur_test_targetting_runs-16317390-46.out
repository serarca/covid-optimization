50
(0.5, 0.29, 60.26345925821449, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 18599515.0, 0.05, 2, 'full_open')
The value of T is: 104
90
Total Reward at the start of the inner iterations: 44433957.04482213
Using license file /share/software/user/restricted/gurobi/9.0.3_py36/licenses/gurobi.lic
Set parameter TokenServer to value license4.stanford.edu
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746112 NZs
  Matrix coefficient range    : [ 3.6075e-13, 1 ]
  Objective coefficient range : [ 9.82279e-18, 2.3828e+07 ]
  Variable bound range        : [ 1, 9.70911 ]
  RHS coefficient range       : [ 2.07005e-06, 60.2635 ]
Objective value for Line heur k = 0: 2719747.434239348
90
Actual reward of current solution: 46249070.83701627
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746109 NZs
  Matrix coefficient range    : [ 4.30481e-13, 1 ]
  Objective coefficient range : [ 2.07776e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 12.7223 ]
  RHS coefficient range       : [ 1.69137e-07, 60.2635 ]
Objective value for Line heur k = 0: 10068846.984105604
90
Actual reward of current solution: 47509288.67950162
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746113 NZs
  Matrix coefficient range    : [ 1.19119e-13, 1 ]
  Objective coefficient range : [ 1.0655e-18, 2.3828e+07 ]
  Variable bound range        : [ 1, 15.7355 ]
  RHS coefficient range       : [ 9.40489e-08, 60.2635 ]
Objective value for Line heur k = 0: 14581162.309078516
90
Actual reward of current solution: 47911902.3132999
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 6.24063e-13, 1 ]
  Objective coefficient range : [ 8.42329e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 18.7486 ]
  RHS coefficient range       : [ 4.59992e-07, 60.2635 ]
Objective value for Line heur k = 0: 15794726.330894534
90
Actual reward of current solution: 48002962.55071758
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 1.29498e-13, 1 ]
  Objective coefficient range : [ 5.60862e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 21.7618 ]
  RHS coefficient range       : [ 8.13229e-07, 60.2635 ]
Objective value for Line heur k = 0: 15950090.069473239
90
Actual reward of current solution: 47979636.85173094
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8435691 NZs
  Matrix coefficient range    : [ 9.07632e-13, 1 ]
  Objective coefficient range : [ 3.87297e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 24.775 ]
  RHS coefficient range       : [ 7.08316e-07, 60.2635 ]
Objective value for Line heur k = 0: 15837987.61760024
90
Actual reward of current solution: 48003834.83013983
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8415342 NZs
  Matrix coefficient range    : [ 9.0072e-13, 1 ]
  Objective coefficient range : [ 2.46459e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 27.7882 ]
  RHS coefficient range       : [ 8.13229e-07, 60.2635 ]
Objective value for Line heur k = 0: 15899437.367938716
90
Actual reward of current solution: 47980047.72429214
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.65798e-12, 1 ]
  Objective coefficient range : [ 1.68018e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 25.4446 ]
  RHS coefficient range       : [ 7.08316e-07, 60.2635 ]
Objective value for Line heur k = 0: 15857274.280870903
90
Actual reward of current solution: 48003841.06480466
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 9.00675e-13, 1 ]
  Objective coefficient range : [ 8.66913e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 28.4577 ]
  RHS coefficient range       : [ 8.13229e-07, 60.2635 ]
Objective value for Line heur k = 0: 15899561.850034451
90
Actual reward of current solution: 47980047.72429214
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.65798e-12, 1 ]
  Objective coefficient range : [ 1.68018e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 30.8013 ]
  RHS coefficient range       : [ 7.08316e-07, 60.2635 ]
Objective value for Line heur k = 0: 15857274.280870903
90
Actual reward of current solution: 48003841.06480466
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 9.00675e-13, 1 ]
  Objective coefficient range : [ 8.66913e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 33.8145 ]
  RHS coefficient range       : [ 8.13229e-07, 60.2635 ]
Objective value for Line heur k = 0: 15899561.850034451
90
Actual reward of current solution: 47980047.72429214
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.65798e-12, 1 ]
  Objective coefficient range : [ 1.68018e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 36.8277 ]
  RHS coefficient range       : [ 7.08316e-07, 60.2635 ]
Objective value for Line heur k = 0: 15857274.280870903
90
Actual reward of current solution: 48003841.06480466
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 9.00675e-13, 1 ]
  Objective coefficient range : [ 8.66913e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 39.8408 ]
  RHS coefficient range       : [ 8.13229e-07, 60.2635 ]
Objective value for Line heur k = 0: 15899561.850034451
90
Actual reward of current solution: 47980047.72429214
Minimum Difference with past solutions:0.05000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.65798e-12, 1 ]
  Objective coefficient range : [ 1.68018e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 42.854 ]
  RHS coefficient range       : [ 7.08316e-07, 60.2635 ]
Objective value for Line heur k = 0: 15857274.280870903
90
Actual reward of current solution: 48003841.06480466
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 9.00675e-13, 1 ]
  Objective coefficient range : [ 8.66913e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 39.8408 ]
  RHS coefficient range       : [ 8.13229e-07, 60.2635 ]
Objective value for Line heur k = 0: 15899561.850034447
90
Actual reward of current solution: 47980047.72429214
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.65798e-12, 1 ]
  Objective coefficient range : [ 1.68018e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 36.8277 ]
  RHS coefficient range       : [ 7.08316e-07, 60.2635 ]
Objective value for Line heur k = 0: 15857274.280870903
90
Actual reward of current solution: 48003841.06480466
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 9.00675e-13, 1 ]
  Objective coefficient range : [ 5.21378e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 33.8145 ]
  RHS coefficient range       : [ 8.13229e-07, 60.2635 ]
Objective value for Line heur k = 0: 15899561.850034451
90
Actual reward of current solution: 47980047.72429214
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.65798e-12, 1 ]
  Objective coefficient range : [ 1.68018e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 36.8277 ]
  RHS coefficient range       : [ 7.08316e-07, 60.2635 ]
Objective value for Line heur k = 0: 15857274.280870903
90
Actual reward of current solution: 48003841.06480466
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 9.00675e-13, 1 ]
  Objective coefficient range : [ 8.66913e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 39.1712 ]
  RHS coefficient range       : [ 8.13229e-07, 60.2635 ]
Objective value for Line heur k = 0: 15899561.850034451
90
Actual reward of current solution: 47980047.72429214
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.65798e-12, 1 ]
  Objective coefficient range : [ 1.68018e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 42.1844 ]
  RHS coefficient range       : [ 7.08316e-07, 60.2635 ]
Objective value for Line heur k = 0: 15857274.280870903
90
Actual reward of current solution: 48003841.06480466
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 9.00675e-13, 1 ]
  Objective coefficient range : [ 8.66913e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 45.1976 ]
  RHS coefficient range       : [ 8.13229e-07, 60.2635 ]
Objective value for Line heur k = 0: 15899561.850034451
90
Actual reward of current solution: 47980047.72429214
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.65798e-12, 1 ]
  Objective coefficient range : [ 1.68018e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 48.2108 ]
  RHS coefficient range       : [ 7.08316e-07, 60.2635 ]
Objective value for Line heur k = 0: 15857274.280870903
90
Actual reward of current solution: 48003841.06480466
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 9.00675e-13, 1 ]
  Objective coefficient range : [ 5.21378e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 45.1976 ]
  RHS coefficient range       : [ 8.13229e-07, 60.2635 ]
Objective value for Line heur k = 0: 15899561.850034451
90
Actual reward of current solution: 47980047.72429214
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.65798e-12, 1 ]
  Objective coefficient range : [ 1.68018e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 42.1844 ]
  RHS coefficient range       : [ 7.08316e-07, 60.2635 ]
Objective value for Line heur k = 0: 15857274.280870903
90
Actual reward of current solution: 48003841.06480466
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 9.00675e-13, 1 ]
  Objective coefficient range : [ 8.66913e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 45.1976 ]
  RHS coefficient range       : [ 8.13229e-07, 60.2635 ]
Objective value for Line heur k = 0: 15899561.850034451
90
Actual reward of current solution: 47980047.72429214
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.65798e-12, 1 ]
  Objective coefficient range : [ 1.68018e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 42.1844 ]
  RHS coefficient range       : [ 7.08316e-07, 60.2635 ]
Objective value for Line heur k = 0: 15857274.280870903
90
Actual reward of current solution: 48003841.06480466
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 9.00675e-13, 1 ]
  Objective coefficient range : [ 8.66913e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 39.8408 ]
  RHS coefficient range       : [ 8.13229e-07, 60.2635 ]
Objective value for Line heur k = 0: 15899561.850034451
90
Actual reward of current solution: 47980047.72429214
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.65798e-12, 1 ]
  Objective coefficient range : [ 1.68018e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 42.854 ]
  RHS coefficient range       : [ 7.08316e-07, 60.2635 ]
Objective value for Line heur k = 0: 15857274.280870903
90
Actual reward of current solution: 48003841.06480466
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 9.00675e-13, 1 ]
  Objective coefficient range : [ 8.66913e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 45.8672 ]
  RHS coefficient range       : [ 8.13229e-07, 60.2635 ]
Objective value for Line heur k = 0: 15899561.850034447
90
Actual reward of current solution: 47980047.72429214
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.65798e-12, 1 ]
  Objective coefficient range : [ 1.68018e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.669594, 48.8804 ]
  RHS coefficient range       : [ 7.08316e-07, 60.2635 ]
Objective value for Line heur k = 0: 15857274.280870903
Traceback (most recent call last):
  File "run_linearization_heuristic_test_targetting_value.py", line 541, in <module>
    main()
  File "run_linearization_heuristic_test_targetting_value.py", line 145, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 184, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 325, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, False, 0.1,optimizeLockdowns)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1985, in run_heuristic_linearization
    Xhat_seq, uhat_seq = get_X_hat_sequence(dynModel, k, uhat_seq, use_bounce_var)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 463, in get_X_hat_sequence
    dynModel.take_time_step(m_tests, a_tests, alphas, BH, BICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 158, in take_time_step
    self.groups[n].take_time_step(m_tests[n], a_tests[n], self.beds, self.icus, B_H[n], B_ICU[n])
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 600, in take_time_step
    self.update_I(m_tests, a_tests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 684, in update_I
    assert self.I[self.parent.t]+delta_I*self.dt >= 0, (f'Total infected is negative: {self.I[self.parent.t]+delta_I*self.dt}. \n Infected time t: {self.I[self.parent.t]}. \n Delta I: {delta_I}.\n Total N time t: {self.N[self.parent.t]}.\n Total E time t: {self.E[self.parent.t]}.\n M tests at time t: {m_tests}.\n Total m_tests: {m_tests * self.dt * self.I[self.parent.t]/self.N[self.parent.t]}.\n  Total new infected: {self.dt * self.parameters["sigma"]*self.E[self.parent.t]}.\n  Total recovered or going to H, ICU: {self.dt * self.parameters["mu"]*self.I[self.parent.t]}')
AssertionError: Total infected is negative: -0.0002237597117556757. 
 Infected time t: 0.007327957907008607. 
 Delta I: -0.007551717618764282.
 Total N time t: 52.45813195207276.
 Total E time t: 0.004433781763772713.
 M tests at time t: 48.88036139832951.
 Total m_tests: 0.006828173582955309.
  Total new infected: 0.0011084454409431782.
  Total recovered or going to H, ICU: 0.0018319894767521517
srun: error: sh02-01n21: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=16317459.0
