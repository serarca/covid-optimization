50
(0.5, 0.29, 57.25655068815804, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 18599515.0, 0.05, 2, 'full_open')
The value of T is: 104
90
Total Reward at the start of the inner iterations: 44010941.16727988
Using license file /share/software/user/restricted/gurobi/9.0.3_py36/licenses/gurobi.lic
Set parameter TokenServer to value license4.stanford.edu
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746113 NZs
  Matrix coefficient range    : [ 4.90018e-13, 1 ]
  Objective coefficient range : [ 1.10956e-17, 2.3828e+07 ]
  Variable bound range        : [ 1, 9.22467 ]
  RHS coefficient range       : [ 1.72502e-06, 57.2566 ]
Objective value for Line heur k = 0: 850799.2472374298
90
Actual reward of current solution: 45815408.7350863
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746112 NZs
  Matrix coefficient range    : [ 3.83762e-13, 1 ]
  Objective coefficient range : [ 1.80397e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.636184, 12.0875 ]
  RHS coefficient range       : [ 8.95777e-07, 57.2566 ]
Objective value for Line heur k = 0: 8126625.6094788015
90
Actual reward of current solution: 47093273.62396214
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746113 NZs
  Matrix coefficient range    : [ 1.13246e-13, 1 ]
  Objective coefficient range : [ 2.27563e-19, 2.3828e+07 ]
  Variable bound range        : [ 1, 14.9503 ]
  RHS coefficient range       : [ 3.8928e-07, 57.2566 ]
Objective value for Line heur k = 0: 12706502.58472126
90
Actual reward of current solution: 47512295.206585616
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 6.64187e-13, 1 ]
  Objective coefficient range : [ 4.36391e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.636184, 17.8131 ]
  RHS coefficient range       : [ 1.20958e-08, 57.2566 ]
Objective value for Line heur k = 0: 13995603.578096779
90
Actual reward of current solution: 47613212.46901571
Minimum Difference with past solutions:0.05000000000000012.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 1.36534e-13, 1 ]
  Objective coefficient range : [ 6.49338e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.636184, 20.676 ]
  RHS coefficient range       : [ 7.86986e-08, 57.2566 ]
Objective value for Line heur k = 0: 14194012.418935917
90
Actual reward of current solution: 47595549.13570603
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8415342 NZs
  Matrix coefficient range    : [ 1.81361e-12, 1 ]
  Objective coefficient range : [ 2.26807e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.636184, 23.5388 ]
  RHS coefficient range       : [ 5.65598e-08, 57.2566 ]
Objective value for Line heur k = 0: 14077801.441906655
90
Actual reward of current solution: 47617016.72251842
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8431910 NZs
  Matrix coefficient range    : [ 1.36907e-13, 1 ]
  Objective coefficient range : [ 3.13186e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.318092, 26.4016 ]
  RHS coefficient range       : [ 7.86986e-08, 57.2566 ]
Objective value for Line heur k = 0: 14151827.708538355
90
Actual reward of current solution: 47596123.23798082
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 1.80178e-12, 1 ]
  Objective coefficient range : [ 6.0023e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.636184, 24.175 ]
  RHS coefficient range       : [ 5.65598e-08, 57.2566 ]
Objective value for Line heur k = 0: 14105926.411453253
90
Actual reward of current solution: 47616562.213439636
Minimum Difference with past solutions:0.050000000000000065.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.16207e-12, 1 ]
  Objective coefficient range : [ 7.51077e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.318092, 27.0378 ]
  RHS coefficient range       : [ 7.86986e-08, 57.2566 ]
Objective value for Line heur k = 0: 14146522.544430902
90
Actual reward of current solution: 47596123.23798082
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 1.80178e-12, 1 ]
  Objective coefficient range : [ 6.0023e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.636184, 29.2645 ]
  RHS coefficient range       : [ 5.65598e-08, 57.2566 ]
Objective value for Line heur k = 0: 14105926.411453253
90
Actual reward of current solution: 47616562.213439636
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.16207e-12, 1 ]
  Objective coefficient range : [ 3.06756e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.318092, 32.1273 ]
  RHS coefficient range       : [ 7.86986e-08, 57.2566 ]
Objective value for Line heur k = 0: 14146522.544430902
90
Actual reward of current solution: 47596123.23798082
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 1.80178e-12, 1 ]
  Objective coefficient range : [ 6.0023e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.636184, 29.2645 ]
  RHS coefficient range       : [ 5.65598e-08, 57.2566 ]
Objective value for Line heur k = 0: 14105926.411453253
90
Actual reward of current solution: 47616562.213439636
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.16207e-12, 1 ]
  Objective coefficient range : [ 7.51077e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.318092, 32.1273 ]
  RHS coefficient range       : [ 7.86986e-08, 57.2566 ]
Objective value for Line heur k = 0: 14146522.544430902
90
Actual reward of current solution: 47596123.23798082
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 1.80178e-12, 1 ]
  Objective coefficient range : [ 6.0023e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.636184, 34.9901 ]
  RHS coefficient range       : [ 5.65598e-08, 57.2566 ]
Objective value for Line heur k = 0: 14105926.411453253
90
Actual reward of current solution: 47616562.213439636
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.16207e-12, 1 ]
  Objective coefficient range : [ 3.06756e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.318092, 37.8529 ]
  RHS coefficient range       : [ 7.86986e-08, 57.2566 ]
Objective value for Line heur k = 0: 14146522.544430902
90
Actual reward of current solution: 47596123.23798082
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 1.80178e-12, 1 ]
  Objective coefficient range : [ 6.0023e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.636184, 34.9901 ]
  RHS coefficient range       : [ 5.65598e-08, 57.2566 ]
Objective value for Line heur k = 0: 14105926.411453253
90
Actual reward of current solution: 47616562.213439636
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.16207e-12, 1 ]
  Objective coefficient range : [ 3.06756e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.318092, 32.1273 ]
  RHS coefficient range       : [ 7.86986e-08, 57.2566 ]
Objective value for Line heur k = 0: 14146522.544430902
90
Actual reward of current solution: 47596123.23798082
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 1.80178e-12, 1 ]
  Objective coefficient range : [ 6.0023e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.636184, 34.9901 ]
  RHS coefficient range       : [ 5.65598e-08, 57.2566 ]
Objective value for Line heur k = 0: 14105926.411453253
90
Actual reward of current solution: 47616562.213439636
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.16207e-12, 1 ]
  Objective coefficient range : [ 3.06756e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.318092, 37.8529 ]
  RHS coefficient range       : [ 7.86986e-08, 57.2566 ]
Objective value for Line heur k = 0: 14146522.544430902
90
Actual reward of current solution: 47596123.23798082
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 1.80178e-12, 1 ]
  Objective coefficient range : [ 6.0023e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.636184, 40.7158 ]
  RHS coefficient range       : [ 5.65598e-08, 57.2566 ]
Objective value for Line heur k = 0: 14105926.411453253
90
Actual reward of current solution: 47616562.213439636
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.16207e-12, 1 ]
  Objective coefficient range : [ 3.06756e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.318092, 37.8529 ]
  RHS coefficient range       : [ 7.86986e-08, 57.2566 ]
Objective value for Line heur k = 0: 14146522.544430902
90
Actual reward of current solution: 47596123.23798082
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 1.80178e-12, 1 ]
  Objective coefficient range : [ 6.0023e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.636184, 40.7158 ]
  RHS coefficient range       : [ 5.65598e-08, 57.2566 ]
Objective value for Line heur k = 0: 14105926.411453253
90
Actual reward of current solution: 47616562.213439636
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.16207e-12, 1 ]
  Objective coefficient range : [ 3.06756e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.318092, 43.5786 ]
  RHS coefficient range       : [ 7.86986e-08, 57.2566 ]
Objective value for Line heur k = 0: 14146522.544430902
90
Actual reward of current solution: 47596123.23798082
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 1.80178e-12, 1 ]
  Objective coefficient range : [ 6.0023e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.636184, 46.4414 ]
  RHS coefficient range       : [ 5.65598e-08, 57.2566 ]
Objective value for Line heur k = 0: 14105926.411453253
Traceback (most recent call last):
  File "run_linearization_heuristic_test_targetting_value.py", line 541, in <module>
    main()
  File "run_linearization_heuristic_test_targetting_value.py", line 145, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 184, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 325, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, False, 0.1,optimizeLockdowns)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1985, in run_heuristic_linearization
    Xhat_seq, uhat_seq = get_X_hat_sequence(dynModel, k, uhat_seq, use_bounce_var)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 463, in get_X_hat_sequence
    dynModel.take_time_step(m_tests, a_tests, alphas, BH, BICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 158, in take_time_step
    self.groups[n].take_time_step(m_tests[n], a_tests[n], self.beds, self.icus, B_H[n], B_ICU[n])
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 600, in take_time_step
    self.update_I(m_tests, a_tests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 684, in update_I
    assert self.I[self.parent.t]+delta_I*self.dt >= 0, (f'Total infected is negative: {self.I[self.parent.t]+delta_I*self.dt}. \n Infected time t: {self.I[self.parent.t]}. \n Delta I: {delta_I}.\n Total N time t: {self.N[self.parent.t]}.\n Total E time t: {self.E[self.parent.t]}.\n M tests at time t: {m_tests}.\n Total m_tests: {m_tests * self.dt * self.I[self.parent.t]/self.N[self.parent.t]}.\n  Total new infected: {self.dt * self.parameters["sigma"]*self.E[self.parent.t]}.\n  Total recovered or going to H, ICU: {self.dt * self.parameters["mu"]*self.I[self.parent.t]}')
AssertionError: Total infected is negative: -0.00041379813332875597. 
 Infected time t: 0.011937179422667903. 
 Delta I: -0.01235097755599666.
 Total N time t: 52.40539819669064.
 Total E time t: 0.004847964657200444.
 M tests at time t: 46.44142444706151.
 Total m_tests: 0.010578673864629795.
  Total new infected: 0.001211991164300111.
  Total recovered or going to H, ICU: 0.002984294855666976
srun: error: sh02-01n29: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=16317451.0
