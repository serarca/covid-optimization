50
(0.5, 0.29, 52.746187833073385, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 18599515.0, 0.05, 2, 'full_open')
The value of T is: 104
90
Total Reward at the start of the inner iterations: 43343552.1576733
Using license file /share/software/user/restricted/gurobi/9.0.3_py36/licenses/gurobi.lic
Set parameter TokenServer to value license4.stanford.edu
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746111 NZs
  Matrix coefficient range    : [ 1.05856e-13, 1 ]
  Objective coefficient range : [ 5.37452e-18, 2.3828e+07 ]
  Variable bound range        : [ 1, 8.498 ]
  RHS coefficient range       : [ 1.19579e-06, 52.7462 ]
Objective value for Line heur k = 0: -2078227.030494071
90
Actual reward of current solution: 45120655.935078755
Minimum Difference with past solutions:0.05000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746110 NZs
  Matrix coefficient range    : [ 3.50795e-13, 1 ]
  Objective coefficient range : [ 3.06409e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.586069, 11.1353 ]
  RHS coefficient range       : [ 2.20662e-06, 52.7462 ]
Objective value for Line heur k = 0: 5025788.698609408
90
Actual reward of current solution: 46417181.816909984
Minimum Difference with past solutions:0.05000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746113 NZs
  Matrix coefficient range    : [ 1.04422e-13, 1 ]
  Objective coefficient range : [ 4.56288e-19, 2.3828e+07 ]
  Variable bound range        : [ 1, 13.7726 ]
  RHS coefficient range       : [ 5.95725e-07, 52.7462 ]
Objective value for Line heur k = 0: 9661049.63265592
90
Actual reward of current solution: 46859132.28756855
Minimum Difference with past solutions:0.05000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 7.26214e-13, 1 ]
  Objective coefficient range : [ 2.06393e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.586069, 16.4099 ]
  RHS coefficient range       : [ 2.51743e-07, 52.7462 ]
Objective value for Line heur k = 0: 11055696.525265956
90
Actual reward of current solution: 46974090.91987649
Minimum Difference with past solutions:0.05000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 1.48138e-13, 1 ]
  Objective coefficient range : [ 7.26118e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.586069, 19.0472 ]
  RHS coefficient range       : [ 3.80772e-07, 52.7462 ]
Objective value for Line heur k = 0: 11290896.23248267
90
Actual reward of current solution: 46968083.75791995
Minimum Difference with past solutions:0.05000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8405101 NZs
  Matrix coefficient range    : [ 2.03014e-12, 1 ]
  Objective coefficient range : [ 2.36207e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.586069, 21.6845 ]
  RHS coefficient range       : [ 2.6566e-07, 52.7462 ]
Objective value for Line heur k = 0: 11215987.832824495
90
Actual reward of current solution: 46979191.34638138
Minimum Difference with past solutions:0.05000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.2553e-12, 1 ]
  Objective coefficient range : [ 3.37524e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.293034, 24.3219 ]
  RHS coefficient range       : [ 5.54792e-08, 52.7462 ]
Objective value for Line heur k = 0: 11325552.989594208
90
Actual reward of current solution: 46966545.597348526
Minimum Difference with past solutions:0.05000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 2.03818e-12, 1 ]
  Objective coefficient range : [ 1.16201e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.586069, 26.9592 ]
  RHS coefficient range       : [ 2.6566e-07, 52.7462 ]
Objective value for Line heur k = 0: 11225179.378944404
90
Actual reward of current solution: 46980443.05300377
Minimum Difference with past solutions:0.05000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.25298e-12, 1 ]
  Objective coefficient range : [ 8.7911e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.293034, 24.3219 ]
  RHS coefficient range       : [ 5.54792e-08, 52.7462 ]
Objective value for Line heur k = 0: 11327232.690543005
90
Actual reward of current solution: 46969428.46711896
Minimum Difference with past solutions:0.05000000000000014.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 2.0394e-12, 1 ]
  Objective coefficient range : [ 3.87595e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.586069, 26.9592 ]
  RHS coefficient range       : [ 2.6566e-07, 52.7462 ]
Objective value for Line heur k = 0: 11218103.747789808
90
Actual reward of current solution: 46980387.10050862
Minimum Difference with past solutions:0.05000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.25246e-12, 1 ]
  Objective coefficient range : [ 7.50243e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.293034, 29.5965 ]
  RHS coefficient range       : [ 5.54792e-08, 52.7462 ]
Objective value for Line heur k = 0: 11326795.900138125
90
Actual reward of current solution: 46969428.46711896
Minimum Difference with past solutions:0.05000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 2.0394e-12, 1 ]
  Objective coefficient range : [ 2.57541e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.586069, 26.9592 ]
  RHS coefficient range       : [ 2.6566e-07, 52.7462 ]
Objective value for Line heur k = 0: 11218103.747789804
90
Actual reward of current solution: 46980387.10050862
Minimum Difference with past solutions:0.05000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.25246e-12, 1 ]
  Objective coefficient range : [ 2.01129e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.293034, 29.5965 ]
  RHS coefficient range       : [ 5.54792e-08, 52.7462 ]
Objective value for Line heur k = 0: 11326795.900138125
90
Actual reward of current solution: 46969428.46711896
Minimum Difference with past solutions:0.05000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 2.0394e-12, 1 ]
  Objective coefficient range : [ 2.54518e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.586069, 32.2338 ]
  RHS coefficient range       : [ 2.6566e-07, 52.7462 ]
Objective value for Line heur k = 0: 11218103.747789808
90
Actual reward of current solution: 46980387.10050862
Minimum Difference with past solutions:0.05000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.25246e-12, 1 ]
  Objective coefficient range : [ 2.01129e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.293034, 34.8711 ]
  RHS coefficient range       : [ 5.54792e-08, 52.7462 ]
Objective value for Line heur k = 0: 11326795.900138125
90
Actual reward of current solution: 46969428.46711896
Minimum Difference with past solutions:0.05000000000000007.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 2.0394e-12, 1 ]
  Objective coefficient range : [ 2.54518e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.586069, 37.5084 ]
  RHS coefficient range       : [ 2.6566e-07, 52.7462 ]
Objective value for Line heur k = 0: 11218103.747789808
90
Actual reward of current solution: 46980387.10050862
Minimum Difference with past solutions:0.05000000000000007.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.25246e-12, 1 ]
  Objective coefficient range : [ 2.01129e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.293034, 40.1457 ]
  RHS coefficient range       : [ 5.54792e-08, 52.7462 ]
Objective value for Line heur k = 0: 11326795.900138125
90
Actual reward of current solution: 46969428.46711896
Minimum Difference with past solutions:0.05000000000000007.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 2.0394e-12, 1 ]
  Objective coefficient range : [ 2.54518e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.586069, 42.783 ]
  RHS coefficient range       : [ 2.6566e-07, 52.7462 ]
Objective value for Line heur k = 0: 11218103.747789808
90
Actual reward of current solution: 46980387.10050862
Minimum Difference with past solutions:0.05000000000000007.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.25246e-12, 1 ]
  Objective coefficient range : [ 2.01129e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.293034, 45.4203 ]
  RHS coefficient range       : [ 5.54792e-08, 52.7462 ]
Objective value for Line heur k = 0: 11326795.900138125
Traceback (most recent call last):
  File "run_linearization_heuristic_test_targetting_value.py", line 541, in <module>
    main()
  File "run_linearization_heuristic_test_targetting_value.py", line 145, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 184, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 325, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, False, 0.1,optimizeLockdowns)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1985, in run_heuristic_linearization
    Xhat_seq, uhat_seq = get_X_hat_sequence(dynModel, k, uhat_seq, use_bounce_var)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 463, in get_X_hat_sequence
    dynModel.take_time_step(m_tests, a_tests, alphas, BH, BICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 158, in take_time_step
    self.groups[n].take_time_step(m_tests[n], a_tests[n], self.beds, self.icus, B_H[n], B_ICU[n])
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 600, in take_time_step
    self.update_I(m_tests, a_tests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 684, in update_I
    assert self.I[self.parent.t]+delta_I*self.dt >= 0, (f'Total infected is negative: {self.I[self.parent.t]+delta_I*self.dt}. \n Infected time t: {self.I[self.parent.t]}. \n Delta I: {delta_I}.\n Total N time t: {self.N[self.parent.t]}.\n Total E time t: {self.E[self.parent.t]}.\n M tests at time t: {m_tests}.\n Total m_tests: {m_tests * self.dt * self.I[self.parent.t]/self.N[self.parent.t]}.\n  Total new infected: {self.dt * self.parameters["sigma"]*self.E[self.parent.t]}.\n  Total recovered or going to H, ICU: {self.dt * self.parameters["mu"]*self.I[self.parent.t]}')
AssertionError: Total infected is negative: -0.0014509733901501252. 
 Infected time t: 0.024196498923216993. 
 Delta I: -0.025647472313367118.
 Total N time t: 52.388260888210496.
 Total E time t: 0.005519525187501366.
 M tests at time t: 45.420328411813216.
 Total m_tests: 0.02097822887943821.
  Total new infected: 0.0013798812968753415.
  Total recovered or going to H, ICU: 0.006049124730804248
srun: error: sh02-01n33: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=16317439.0
