50
(0.5, 0.29, 57.6324142594151, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 18599515.0, 0.05, 2, 'full_open')
The value of T is: 104
90
Total Reward at the start of the inner iterations: 44064761.58686863
Using license file /share/software/user/restricted/gurobi/9.0.3_py36/licenses/gurobi.lic
Set parameter TokenServer to value license4.stanford.edu
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746113 NZs
  Matrix coefficient range    : [ 4.65022e-13, 1 ]
  Objective coefficient range : [ 7.63812e-18, 2.3828e+07 ]
  Variable bound range        : [ 1, 9.28522 ]
  RHS coefficient range       : [ 1.76849e-06, 57.6324 ]
Objective value for Line heur k = 0: 1088087.9240482738
90
Actual reward of current solution: 45870877.92644865
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746112 NZs
  Matrix coefficient range    : [ 1.97088e-13, 1 ]
  Objective coefficient range : [ 3.20836e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.64036, 12.1668 ]
  RHS coefficient range       : [ 7.61155e-07, 57.6324 ]
Objective value for Line heur k = 0: 8374827.758873257
90
Actual reward of current solution: 47146736.87184504
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746113 NZs
  Matrix coefficient range    : [ 1.1398e-13, 1 ]
  Objective coefficient range : [ 3.47281e-19, 2.3828e+07 ]
  Variable bound range        : [ 1, 15.0485 ]
  RHS coefficient range       : [ 3.28061e-07, 57.6324 ]
Objective value for Line heur k = 0: 12947612.044504667
90
Actual reward of current solution: 47563750.66154264
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 6.591e-13, 1 ]
  Objective coefficient range : [ 1.84813e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.64036, 17.9301 ]
  RHS coefficient range       : [ 4.78215e-08, 57.6324 ]
Objective value for Line heur k = 0: 14227481.788119705
90
Actual reward of current solution: 47663444.627145536
Minimum Difference with past solutions:0.05000000000000008.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 1.35646e-13, 1 ]
  Objective coefficient range : [ 1.9228e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.64036, 20.8117 ]
  RHS coefficient range       : [ 4.08435e-07, 57.6324 ]
Objective value for Line heur k = 0: 14420386.771623323
90
Actual reward of current solution: 47645085.433904946
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8415342 NZs
  Matrix coefficient range    : [ 1.79562e-12, 1 ]
  Objective coefficient range : [ 2.79983e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.64036, 23.6933 ]
  RHS coefficient range       : [ 3.12051e-07, 57.6324 ]
Objective value for Line heur k = 0: 14301769.584345771
90
Actual reward of current solution: 47666868.367266245
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8431910 NZs
  Matrix coefficient range    : [ 1.36052e-13, 1 ]
  Objective coefficient range : [ 1.80424e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.32018, 26.5749 ]
  RHS coefficient range       : [ 4.08435e-07, 57.6324 ]
Objective value for Line heur k = 0: 14376515.402020909
90
Actual reward of current solution: 47645788.457437545
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8413917 NZs
  Matrix coefficient range    : [ 1.78371e-12, 1 ]
  Objective coefficient range : [ 1.67086e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.64036, 24.3337 ]
  RHS coefficient range       : [ 3.12051e-07, 57.6324 ]
Objective value for Line heur k = 0: 14330584.284804417
90
Actual reward of current solution: 47666386.98292343
Minimum Difference with past solutions:0.05000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.15456e-12, 1 ]
  Objective coefficient range : [ 1.27991e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.32018, 27.2153 ]
  RHS coefficient range       : [ 4.08435e-07, 57.6324 ]
Objective value for Line heur k = 0: 14371137.108146528
90
Actual reward of current solution: 47645075.72603682
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.77914e-12, 1 ]
  Objective coefficient range : [ 2.99219e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.64036, 24.3337 ]
  RHS coefficient range       : [ 3.12051e-07, 57.6324 ]
Objective value for Line heur k = 0: 14335680.061117204
90
Actual reward of current solution: 47666386.98292343
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.15456e-12, 1 ]
  Objective coefficient range : [ 3.72561e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.32018, 27.2153 ]
  RHS coefficient range       : [ 4.08435e-07, 57.6324 ]
Objective value for Line heur k = 0: 14371137.108146528
90
Actual reward of current solution: 47645075.72603682
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.77914e-12, 1 ]
  Objective coefficient range : [ 2.99219e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.64036, 29.4566 ]
  RHS coefficient range       : [ 3.12051e-07, 57.6324 ]
Objective value for Line heur k = 0: 14335680.061117204
90
Actual reward of current solution: 47666386.98292343
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.15456e-12, 1 ]
  Objective coefficient range : [ 3.72561e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.32018, 32.3382 ]
  RHS coefficient range       : [ 4.08435e-07, 57.6324 ]
Objective value for Line heur k = 0: 14371137.108146528
90
Actual reward of current solution: 47645075.72603682
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.77914e-12, 1 ]
  Objective coefficient range : [ 2.99219e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.64036, 29.4566 ]
  RHS coefficient range       : [ 3.12051e-07, 57.6324 ]
Objective value for Line heur k = 0: 14335680.061117204
90
Actual reward of current solution: 47666386.98292343
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.15456e-12, 1 ]
  Objective coefficient range : [ 1.21847e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.32018, 32.3382 ]
  RHS coefficient range       : [ 4.08435e-07, 57.6324 ]
Objective value for Line heur k = 0: 14371137.108146528
90
Actual reward of current solution: 47645075.72603682
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.77914e-12, 1 ]
  Objective coefficient range : [ 2.99219e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.64036, 35.2198 ]
  RHS coefficient range       : [ 3.12051e-07, 57.6324 ]
Objective value for Line heur k = 0: 14335680.061117204
90
Actual reward of current solution: 47666386.98292343
Minimum Difference with past solutions:0.05000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.15456e-12, 1 ]
  Objective coefficient range : [ 3.72561e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.32018, 38.1014 ]
  RHS coefficient range       : [ 4.08435e-07, 57.6324 ]
Objective value for Line heur k = 0: 14371137.108146528
90
Actual reward of current solution: 47645075.72603682
Minimum Difference with past solutions:0.05000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.77914e-12, 1 ]
  Objective coefficient range : [ 2.99219e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.64036, 40.9831 ]
  RHS coefficient range       : [ 3.12051e-07, 57.6324 ]
Objective value for Line heur k = 0: 14335680.061117204
90
Actual reward of current solution: 47666386.98292343
Minimum Difference with past solutions:0.05000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.15456e-12, 1 ]
  Objective coefficient range : [ 3.72561e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.32018, 43.8647 ]
  RHS coefficient range       : [ 4.08435e-07, 57.6324 ]
Objective value for Line heur k = 0: 14371137.108146528
90
Actual reward of current solution: 47645075.72603682
Minimum Difference with past solutions:0.05000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.77914e-12, 1 ]
  Objective coefficient range : [ 2.99219e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.64036, 46.7463 ]
  RHS coefficient range       : [ 3.12051e-07, 57.6324 ]
Objective value for Line heur k = 0: 14335680.061117204
90
Actual reward of current solution: 47666386.98292343
Minimum Difference with past solutions:0.05000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.15456e-12, 1 ]
  Objective coefficient range : [ 2.43695e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.32018, 49.6279 ]
  RHS coefficient range       : [ 4.08435e-07, 57.6324 ]
Objective value for Line heur k = 0: 14371137.108146528
90
Actual reward of current solution: 47645075.72603682
Minimum Difference with past solutions:0.05000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.77914e-12, 1 ]
  Objective coefficient range : [ 3.71591e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.64036, 46.7463 ]
  RHS coefficient range       : [ 3.12051e-07, 57.6324 ]
Objective value for Line heur k = 0: 14335680.061117204
Traceback (most recent call last):
  File "run_linearization_heuristic_test_targetting_value.py", line 541, in <module>
    main()
  File "run_linearization_heuristic_test_targetting_value.py", line 145, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 184, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 325, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, False, 0.1,optimizeLockdowns)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1985, in run_heuristic_linearization
    Xhat_seq, uhat_seq = get_X_hat_sequence(dynModel, k, uhat_seq, use_bounce_var)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 463, in get_X_hat_sequence
    dynModel.take_time_step(m_tests, a_tests, alphas, BH, BICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 158, in take_time_step
    self.groups[n].take_time_step(m_tests[n], a_tests[n], self.beds, self.icus, B_H[n], B_ICU[n])
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 600, in take_time_step
    self.update_I(m_tests, a_tests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 684, in update_I
    assert self.I[self.parent.t]+delta_I*self.dt >= 0, (f'Total infected is negative: {self.I[self.parent.t]+delta_I*self.dt}. \n Infected time t: {self.I[self.parent.t]}. \n Delta I: {delta_I}.\n Total N time t: {self.N[self.parent.t]}.\n Total E time t: {self.E[self.parent.t]}.\n M tests at time t: {m_tests}.\n Total m_tests: {m_tests * self.dt * self.I[self.parent.t]/self.N[self.parent.t]}.\n  Total new infected: {self.dt * self.parameters["sigma"]*self.E[self.parent.t]}.\n  Total recovered or going to H, ICU: {self.dt * self.parameters["mu"]*self.I[self.parent.t]}')
AssertionError: Total infected is negative: -0.0005584721836769287. 
 Infected time t: 0.012430592329851659. 
 Delta I: -0.012989064513528588.
 Total N time t: 52.44197993101866.
 Total E time t: 0.004796390319639929.
 M tests at time t: 46.74629156597003.
 Total m_tests: 0.011080514010975656.
  Total new infected: 0.0011990975799099823.
  Total recovered or going to H, ICU: 0.0031076480824629147
srun: error: sh02-01n26: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=16317452.0
