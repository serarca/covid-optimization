50
(0.5, 0.29, 61.01518640072859, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 18599515.0, 0.05, 2, 'full_open')
The value of T is: 104
90
Total Reward at the start of the inner iterations: 44537045.72039144
Using license file /share/software/user/restricted/gurobi/9.0.3_py36/licenses/gurobi.lic
Set parameter TokenServer to value license4.stanford.edu
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746112 NZs
  Matrix coefficient range    : [ 2.30864e-13, 1 ]
  Objective coefficient range : [ 2.40065e-18, 2.3828e+07 ]
  Variable bound range        : [ 1, 9.83022 ]
  RHS coefficient range       : [ 2.15534e-06, 61.0152 ]
Objective value for Line heur k = 0: 3176497.081263148
90
Actual reward of current solution: 46353940.60026061
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746112 NZs
  Matrix coefficient range    : [ 1.32663e-13, 1 ]
  Objective coefficient range : [ 7.8589e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 12.881 ]
  RHS coefficient range       : [ 4.31094e-07, 61.0152 ]
Objective value for Line heur k = 0: 10539013.788271205
90
Actual reward of current solution: 47609144.59060274
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746113 NZs
  Matrix coefficient range    : [ 1.20586e-13, 1 ]
  Objective coefficient range : [ 2.60893e-19, 2.3828e+07 ]
  Variable bound range        : [ 1, 15.9317 ]
  RHS coefficient range       : [ 2.1261e-07, 61.0152 ]
Objective value for Line heur k = 0: 15031528.72966456
90
Actual reward of current solution: 48007570.60899374
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 6.14203e-13, 1 ]
  Objective coefficient range : [ 4.98808e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 18.9825 ]
  RHS coefficient range       : [ 5.75456e-07, 61.0152 ]
Objective value for Line heur k = 0: 16225748.829006355
90
Actual reward of current solution: 48096226.65326791
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 1.27759e-13, 1 ]
  Objective coefficient range : [ 1.62482e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 22.0333 ]
  RHS coefficient range       : [ 9.26382e-07, 61.0152 ]
Objective value for Line heur k = 0: 16371063.898905188
90
Actual reward of current solution: 48069318.96677987
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8435691 NZs
  Matrix coefficient range    : [ 1.63244e-12, 1 ]
  Objective coefficient range : [ 3.87413e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 25.084 ]
  RHS coefficient range       : [ 7.17773e-07, 61.0152 ]
Objective value for Line heur k = 0: 16322676.762019124
90
Actual reward of current solution: 48098719.49815572
Minimum Difference with past solutions:0.05000000000000011.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 5.06628e-13, 1 ]
  Objective coefficient range : [ 2.43171e-18, 2.3828e+07 ]
  Variable bound range        : [ 6.21725e-15, 28.1348 ]
  RHS coefficient range       : [ 9.26382e-07, 61.0152 ]
Objective value for Line heur k = 0: 16369631.37892535
90
Actual reward of current solution: 48069067.78610446
Minimum Difference with past solutions:0.05000000000000011.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 1.62996e-12, 1 ]
  Objective coefficient range : [ 2.08908e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 28.8127 ]
  RHS coefficient range       : [ 7.17773e-07, 61.0152 ]
Objective value for Line heur k = 0: 16316204.576135127
90
Actual reward of current solution: 48099068.14518424
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8434266 NZs
  Matrix coefficient range    : [ 8.81089e-13, 1 ]
  Objective coefficient range : [ 4.01558e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 31.8635 ]
  RHS coefficient range       : [ 9.26382e-07, 61.0152 ]
Objective value for Line heur k = 0: 16371113.430407586
90
Actual reward of current solution: 48069067.78610446
Minimum Difference with past solutions:2.329068475161179e-16.
New solution equals old solution at k=0
89
Total Reward at the start of the inner iterations: 48099068.14518424
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 8.81089e-13, 1 ]
  Objective coefficient range : [ 4.01558e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 31.8635 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16513515.14867611
89
Actual reward of current solution: 48076801.089652844
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 1.62919e-12, 1 ]
  Objective coefficient range : [ 1.61789e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 28.8127 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16460168.609261835
89
Actual reward of current solution: 48099068.14518424
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 8.81089e-13, 1 ]
  Objective coefficient range : [ 3.34325e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 31.8635 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16513515.14867611
89
Actual reward of current solution: 48076801.089652844
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 1.62919e-12, 1 ]
  Objective coefficient range : [ 1.61789e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 28.8127 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16460168.609261835
89
Actual reward of current solution: 48099068.14518424
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 8.81089e-13, 1 ]
  Objective coefficient range : [ 3.34325e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 31.8635 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16513515.14867611
89
Actual reward of current solution: 48076801.089652844
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 1.62919e-12, 1 ]
  Objective coefficient range : [ 1.61789e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 31.1855 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16460168.609261835
89
Actual reward of current solution: 48099068.14518424
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 8.81089e-13, 1 ]
  Objective coefficient range : [ 3.34325e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 31.8635 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16513515.14867611
89
Actual reward of current solution: 48076801.089652844
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 1.62919e-12, 1 ]
  Objective coefficient range : [ 8.15892e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 31.1855 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16460168.609261835
89
Actual reward of current solution: 48099068.14518424
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 8.81089e-13, 1 ]
  Objective coefficient range : [ 4.28058e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 34.2363 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16513515.14867611
89
Actual reward of current solution: 48076801.089652844
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 1.62919e-12, 1 ]
  Objective coefficient range : [ 8.15892e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 31.1855 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16460168.609261835
89
Actual reward of current solution: 48099068.14518424
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 8.81089e-13, 1 ]
  Objective coefficient range : [ 4.28058e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 31.8635 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16513515.14867611
89
Actual reward of current solution: 48076801.089652844
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 1.62919e-12, 1 ]
  Objective coefficient range : [ 1.61789e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 33.5584 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16460168.609261835
89
Actual reward of current solution: 48099068.14518424
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 8.81089e-13, 1 ]
  Objective coefficient range : [ 3.34325e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 36.6091 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16513515.14867611
89
Actual reward of current solution: 48076801.089652844
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 1.62919e-12, 1 ]
  Objective coefficient range : [ 8.15892e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 39.6599 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16460168.609261835
89
Actual reward of current solution: 48099068.14518424
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 8.81089e-13, 1 ]
  Objective coefficient range : [ 1.15032e-17, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 42.7106 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16513515.14867611
89
Actual reward of current solution: 48076801.089652844
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 1.62919e-12, 1 ]
  Objective coefficient range : [ 8.15892e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 45.7614 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16460168.609261835
89
Actual reward of current solution: 48099068.14518424
Minimum Difference with past solutions:0.05000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8267617 NZs
  Matrix coefficient range    : [ 8.81089e-13, 1 ]
  Objective coefficient range : [ 3.34325e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.677947, 48.8121 ]
  RHS coefficient range       : [ 1.36187e-06, 61.0152 ]
Objective value for Line heur k = 1: 16513515.14867611
Traceback (most recent call last):
  File "run_linearization_heuristic_test_targetting_value.py", line 541, in <module>
    main()
  File "run_linearization_heuristic_test_targetting_value.py", line 145, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 184, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 325, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, False, 0.1,optimizeLockdowns)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1985, in run_heuristic_linearization
    Xhat_seq, uhat_seq = get_X_hat_sequence(dynModel, k, uhat_seq, use_bounce_var)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 463, in get_X_hat_sequence
    dynModel.take_time_step(m_tests, a_tests, alphas, BH, BICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 158, in take_time_step
    self.groups[n].take_time_step(m_tests[n], a_tests[n], self.beds, self.icus, B_H[n], B_ICU[n])
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 600, in take_time_step
    self.update_I(m_tests, a_tests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 684, in update_I
    assert self.I[self.parent.t]+delta_I*self.dt >= 0, (f'Total infected is negative: {self.I[self.parent.t]+delta_I*self.dt}. \n Infected time t: {self.I[self.parent.t]}. \n Delta I: {delta_I}.\n Total N time t: {self.N[self.parent.t]}.\n Total E time t: {self.E[self.parent.t]}.\n M tests at time t: {m_tests}.\n Total m_tests: {m_tests * self.dt * self.I[self.parent.t]/self.N[self.parent.t]}.\n  Total new infected: {self.dt * self.parameters["sigma"]*self.E[self.parent.t]}.\n  Total recovered or going to H, ICU: {self.dt * self.parameters["mu"]*self.I[self.parent.t]}')
AssertionError: Total infected is negative: -0.0029037505302405564. 
 Infected time t: 0.09719666189576678. 
 Delta I: -0.10010041242600734.
 Total N time t: 52.551778954754255.
 Total E time t: 0.057915267212130285.
 M tests at time t: 48.812149120582866.
 Total m_tests: 0.09028006375509821.
  Total new infected: 0.014478816803032571.
  Total recovered or going to H, ICU: 0.024299165473941696
srun: error: sh02-01n20: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=16317461.0
