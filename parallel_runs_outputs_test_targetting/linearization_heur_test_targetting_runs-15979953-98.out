100
(0.5, 0.29, 42.53965684927491, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 18599515.0, 0.05, 2, 'full_open')
The value of T is: 104
90
Total Reward at the start of the inner iterations: 41131414.89975198
Using license file /share/software/user/restricted/gurobi/9.0.3_py36/licenses/gurobi.lic
Set parameter TokenServer to value license4.stanford.edu
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746107 NZs
  Matrix coefficient range    : [ 1.22184e-13, 1 ]
  Objective coefficient range : [ 8.55222e-18, 2.3828e+07 ]
  Variable bound range        : [ 1, 6.85361 ]
  RHS coefficient range       : [ 4.61772e-08, 42.5397 ]
Objective value for Line heur k = 0: -9252418.383196376
90
Actual reward of current solution: 43336187.02157346
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746113 NZs
  Matrix coefficient range    : [ 1.83675e-13, 1 ]
  Objective coefficient range : [ 6.10891e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 8.98059 ]
  RHS coefficient range       : [ 9.76093e-07, 42.5397 ]
Objective value for Line heur k = 0: -2831783.486164206
90
Actual reward of current solution: 44628372.73640425
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746106 NZs
  Matrix coefficient range    : [ 1.01402e-13, 1 ]
  Objective coefficient range : [ 2.1467e-20, 2.3828e+07 ]
  Variable bound range        : [ 1, 11.1076 ]
  RHS coefficient range       : [ 1.74839e-06, 42.5397 ]
Objective value for Line heur k = 0: 1685763.7624261016
90
Actual reward of current solution: 45109252.12085013
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463924 NZs
  Matrix coefficient range    : [ 3.68267e-13, 1 ]
  Objective coefficient range : [ 1.9373e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 13.2346 ]
  RHS coefficient range       : [ 2.07575e-06, 42.5397 ]
Objective value for Line heur k = 0: 3255215.2808034546
90
Actual reward of current solution: 45261971.58408604
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 1.71255e-13, 1 ]
  Objective coefficient range : [ 9.67161e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 15.3615 ]
  RHS coefficient range       : [ 2.19874e-06, 42.5397 ]
Objective value for Line heur k = 0: 3661172.3758761575
90
Actual reward of current solution: 45302718.24284485
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403673 NZs
  Matrix coefficient range    : [ 2.11784e-13, 1 ]
  Objective coefficient range : [ 4.40645e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 17.4885 ]
  RHS coefficient range       : [ 2.02736e-06, 42.5397 ]
Objective value for Line heur k = 0: 3635456.5879058666
90
Actual reward of current solution: 45286391.044480674
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403675 NZs
  Matrix coefficient range    : [ 5.96052e-13, 1 ]
  Objective coefficient range : [ 2.76448e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 19.6155 ]
  RHS coefficient range       : [ 2.21566e-06, 42.5397 ]
Objective value for Line heur k = 0: 3643738.123546641
90
Actual reward of current solution: 45306730.58883889
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8368925 NZs
  Matrix coefficient range    : [ 1.90937e-13, 1 ]
  Objective coefficient range : [ 3.08661e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 21.7425 ]
  RHS coefficient range       : [ 2.02736e-06, 42.5397 ]
Objective value for Line heur k = 0: 3635083.559292756
90
Actual reward of current solution: 45286021.74759018
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397159 NZs
  Matrix coefficient range    : [ 2.46348e-13, 1 ]
  Objective coefficient range : [ 1.0959e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 21.7425 ]
  RHS coefficient range       : [ 2.21566e-06, 42.5397 ]
Objective value for Line heur k = 0: 3639066.9626496783
90
Actual reward of current solution: 45305300.68115345
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8375442 NZs
  Matrix coefficient range    : [ 2.80157e-13, 1 ]
  Objective coefficient range : [ 1.21273e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 21.7425 ]
  RHS coefficient range       : [ 2.02736e-06, 42.5397 ]
Objective value for Line heur k = 0: 3638012.382876051
90
Actual reward of current solution: 45286223.945301145
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397159 NZs
  Matrix coefficient range    : [ 3.88984e-13, 1 ]
  Objective coefficient range : [ 3.99396e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 23.8695 ]
  RHS coefficient range       : [ 2.21566e-06, 42.5397 ]
Objective value for Line heur k = 0: 3637056.9813480377
90
Actual reward of current solution: 45305300.68115345
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8375442 NZs
  Matrix coefficient range    : [ 2.80157e-13, 1 ]
  Objective coefficient range : [ 1.21273e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 21.7425 ]
  RHS coefficient range       : [ 2.02736e-06, 42.5397 ]
Objective value for Line heur k = 0: 3638012.382876051
90
Actual reward of current solution: 45286223.945301145
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397159 NZs
  Matrix coefficient range    : [ 3.88984e-13, 1 ]
  Objective coefficient range : [ 3.99396e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 23.8695 ]
  RHS coefficient range       : [ 2.21566e-06, 42.5397 ]
Objective value for Line heur k = 0: 3637056.9813480377
90
Actual reward of current solution: 45305300.68115345
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8375442 NZs
  Matrix coefficient range    : [ 2.80157e-13, 1 ]
  Objective coefficient range : [ 1.21273e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 21.7425 ]
  RHS coefficient range       : [ 2.02736e-06, 42.5397 ]
Objective value for Line heur k = 0: 3638012.382876051
90
Actual reward of current solution: 45286223.945301145
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397159 NZs
  Matrix coefficient range    : [ 3.88984e-13, 1 ]
  Objective coefficient range : [ 3.99396e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 23.8695 ]
  RHS coefficient range       : [ 2.21566e-06, 42.5397 ]
Objective value for Line heur k = 0: 3637056.9813480377
90
Actual reward of current solution: 45305300.68115345
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8375442 NZs
  Matrix coefficient range    : [ 2.80157e-13, 1 ]
  Objective coefficient range : [ 1.21273e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 25.9965 ]
  RHS coefficient range       : [ 2.02736e-06, 42.5397 ]
Objective value for Line heur k = 0: 3638012.382876051
90
Actual reward of current solution: 45286223.945301145
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397159 NZs
  Matrix coefficient range    : [ 3.88984e-13, 1 ]
  Objective coefficient range : [ 3.99396e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 28.1234 ]
  RHS coefficient range       : [ 2.21566e-06, 42.5397 ]
Objective value for Line heur k = 0: 3637056.9813480377
90
Actual reward of current solution: 45305300.68115345
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8375442 NZs
  Matrix coefficient range    : [ 2.80157e-13, 1 ]
  Objective coefficient range : [ 1.21273e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 30.2504 ]
  RHS coefficient range       : [ 2.02736e-06, 42.5397 ]
Objective value for Line heur k = 0: 3638012.382876051
90
Actual reward of current solution: 45286223.945301145
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397159 NZs
  Matrix coefficient range    : [ 3.88984e-13, 1 ]
  Objective coefficient range : [ 3.99396e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 32.3774 ]
  RHS coefficient range       : [ 2.21566e-06, 42.5397 ]
Objective value for Line heur k = 0: 3637056.9813480377
90
Actual reward of current solution: 45305300.68115345
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8375442 NZs
  Matrix coefficient range    : [ 2.80157e-13, 1 ]
  Objective coefficient range : [ 1.21273e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 34.5044 ]
  RHS coefficient range       : [ 2.02736e-06, 42.5397 ]
Objective value for Line heur k = 0: 3638012.382876051
90
Actual reward of current solution: 45286223.945301145
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397159 NZs
  Matrix coefficient range    : [ 3.88984e-13, 1 ]
  Objective coefficient range : [ 3.99396e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 36.6314 ]
  RHS coefficient range       : [ 2.21566e-06, 42.5397 ]
Objective value for Line heur k = 0: 3637056.9813480377
90
Actual reward of current solution: 45305300.68115345
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8375442 NZs
  Matrix coefficient range    : [ 2.80157e-13, 1 ]
  Objective coefficient range : [ 1.21273e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 38.7584 ]
  RHS coefficient range       : [ 2.02736e-06, 42.5397 ]
Objective value for Line heur k = 0: 3638012.382876051
90
Actual reward of current solution: 45286223.945301145
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8397159 NZs
  Matrix coefficient range    : [ 3.88984e-13, 1 ]
  Objective coefficient range : [ 3.99396e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 40.8853 ]
  RHS coefficient range       : [ 2.21566e-06, 42.5397 ]
Objective value for Line heur k = 0: 3637056.9813480377
90
Actual reward of current solution: 45305300.68115345
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8375442 NZs
  Matrix coefficient range    : [ 2.80157e-13, 1 ]
  Objective coefficient range : [ 1.21273e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.472663, 42.5397 ]
  RHS coefficient range       : [ 2.02736e-06, 42.5397 ]
Objective value for Line heur k = 0: 3638012.382876051
Traceback (most recent call last):
  File "run_linearization_heuristic_test_targetting_value.py", line 541, in <module>
    main()
  File "run_linearization_heuristic_test_targetting_value.py", line 145, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 184, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 325, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, False, 0.1,optimizeLockdowns)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1979, in run_heuristic_linearization
    Xhat_seq, uhat_seq = get_X_hat_sequence(dynModel, k, uhat_seq, use_bounce_var)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 463, in get_X_hat_sequence
    dynModel.take_time_step(m_tests, a_tests, alphas, BH, BICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 158, in take_time_step
    self.groups[n].take_time_step(m_tests[n], a_tests[n], self.beds, self.icus, B_H[n], B_ICU[n])
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 600, in take_time_step
    self.update_I(m_tests, a_tests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 684, in update_I
    assert self.I[self.parent.t]+delta_I*self.dt >= 0, (f'Total infected is negative: {self.I[self.parent.t]+delta_I*self.dt}. \n Infected time t: {self.I[self.parent.t]}. \n Delta I: {delta_I}.\n Total N time t: {self.N[self.parent.t]}.\n Total E time t: {self.E[self.parent.t]}.\n M tests at time t: {m_tests}.\n Total m_tests: {m_tests * self.dt * self.I[self.parent.t]/self.N[self.parent.t]}.\n  Total new infected: {self.dt * self.parameters["sigma"]*self.E[self.parent.t]}.\n  Total recovered or going to H, ICU: {self.dt * self.parameters["mu"]*self.I[self.parent.t]}')
AssertionError: Total infected is negative: -8.861521441680745e-05. 
 Infected time t: 0.029740079885198015. 
 Delta I: -0.029828695099614822.
 Total N time t: 52.19074355648279.
 Total E time t: 0.007387535069159375.
 M tests at time t: 42.53965684927491.
 Total m_tests: 0.024240558895605162.
  Total new infected: 0.0018468837672898438.
  Total recovered or going to H, ICU: 0.007435019971299504
srun: error: sh03-01n29: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=15982397.0
