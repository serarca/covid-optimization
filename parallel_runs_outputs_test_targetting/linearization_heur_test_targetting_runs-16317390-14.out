50
(0.5, 0.29, 48.23582497798872, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 18599515.0, 0.05, 2, 'full_open')
The value of T is: 104
90
Total Reward at the start of the inner iterations: 42635214.9628561
Using license file /share/software/user/restricted/gurobi/9.0.3_py36/licenses/gurobi.lic
Set parameter TokenServer to value license4.stanford.edu
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746102 NZs
  Matrix coefficient range    : [ 1.15651e-13, 1 ]
  Objective coefficient range : [ 1.19073e-17, 2.3828e+07 ]
  Variable bound range        : [ 1, 7.77133 ]
  RHS coefficient range       : [ 7.17435e-08, 48.2358 ]
Objective value for Line heur k = 0: -5156556.25005786
90
Actual reward of current solution: 44369821.36183665
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746112 NZs
  Matrix coefficient range    : [ 2.1498e-13, 1 ]
  Objective coefficient range : [ 5.8784e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.535954, 10.1831 ]
  RHS coefficient range       : [ 1.7753e-06, 48.2358 ]
Objective value for Line heur k = 0: 1696815.1299392667
90
Actual reward of current solution: 45673423.25777827
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8746110 NZs
  Matrix coefficient range    : [ 1.01088e-13, 1 ]
  Objective coefficient range : [ 1.02029e-19, 2.3828e+07 ]
  Variable bound range        : [ 1, 12.5949 ]
  RHS coefficient range       : [ 1.25199e-06, 48.2358 ]
Objective value for Line heur k = 0: 6325659.589649082
90
Actual reward of current solution: 46135345.284801215
Minimum Difference with past solutions:0.05.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 7.88886e-13, 1 ]
  Objective coefficient range : [ 2.52074e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.535954, 15.0067 ]
  RHS coefficient range       : [ 1.53135e-06, 48.2358 ]
Objective value for Line heur k = 0: 7811598.206213353
90
Actual reward of current solution: 46267090.77789139
Minimum Difference with past solutions:0.05000000000000008.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8463925 NZs
  Matrix coefficient range    : [ 1.58632e-13, 1 ]
  Objective coefficient range : [ 4.49844e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.535954, 17.4185 ]
  RHS coefficient range       : [ 9.14096e-07, 48.2358 ]
Objective value for Line heur k = 0: 8129677.539167587
90
Actual reward of current solution: 46279348.94778693
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8405101 NZs
  Matrix coefficient range    : [ 2.28846e-12, 1 ]
  Objective coefficient range : [ 3.11744e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.535954, 19.8303 ]
  RHS coefficient range       : [ 1.01234e-06, 48.2358 ]
Objective value for Line heur k = 0: 8046093.167677033
90
Actual reward of current solution: 46277230.0523099
Minimum Difference with past solutions:0.05000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.35696e-12, 1 ]
  Objective coefficient range : [ 1.12106e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.267977, 22.2421 ]
  RHS coefficient range       : [ 9.14096e-07, 48.2358 ]
Objective value for Line heur k = 0: 8064466.505081656
90
Actual reward of current solution: 46280004.745150626
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 18108 Constrs, 9360 Vars, 8403676 NZs
  Matrix coefficient range    : [ 1.45903e-13, 1 ]
  Objective coefficient range : [ 4.09635e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.535954, 24.6539 ]
  RHS coefficient range       : [ 1.01234e-06, 48.2358 ]
Objective value for Line heur k = 0: 8075919.034974418
90
Actual reward of current solution: 46277230.0523099
Minimum Difference with past solutions:1.4730601914331093e-16.
New solution equals old solution at k=0
89
Total Reward at the start of the inner iterations: 46280004.745150626
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.45903e-13, 1 ]
  Objective coefficient range : [ 4.09635e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.535954, 24.6539 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8343219.780810255
89
Actual reward of current solution: 46281458.44665289
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.35697e-12, 1 ]
  Objective coefficient range : [ 1.07032e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.267977, 22.2421 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8289607.499419255
89
Actual reward of current solution: 46280004.745150626
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.45903e-13, 1 ]
  Objective coefficient range : [ 4.45592e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.535954, 24.6539 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8343219.7808102565
89
Actual reward of current solution: 46281458.44665289
Minimum Difference with past solutions:0.05000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.35697e-12, 1 ]
  Objective coefficient range : [ 3.84347e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.267977, 22.2421 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8289607.499419255
89
Actual reward of current solution: 46280004.745150626
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.45903e-13, 1 ]
  Objective coefficient range : [ 1.52696e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.535954, 24.6539 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8343219.7808102565
89
Actual reward of current solution: 46281458.44665289
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.35697e-12, 1 ]
  Objective coefficient range : [ 3.12647e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.267977, 27.0657 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8289607.499419255
89
Actual reward of current solution: 46280004.745150626
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.45903e-13, 1 ]
  Objective coefficient range : [ 1.52696e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.535954, 29.4774 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8343219.7808102565
89
Actual reward of current solution: 46281458.44665289
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.35697e-12, 1 ]
  Objective coefficient range : [ 2.04044e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.267977, 31.8892 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8289607.499419255
89
Actual reward of current solution: 46280004.745150626
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.45903e-13, 1 ]
  Objective coefficient range : [ 1.52696e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.535954, 34.301 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8343219.7808102565
89
Actual reward of current solution: 46281458.44665289
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.35697e-12, 1 ]
  Objective coefficient range : [ 3.35242e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.267977, 36.7128 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8289607.499419255
89
Actual reward of current solution: 46280004.745150626
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.45903e-13, 1 ]
  Objective coefficient range : [ 1.52696e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.535954, 39.1246 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8343219.7808102565
89
Actual reward of current solution: 46281458.44665289
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.35697e-12, 1 ]
  Objective coefficient range : [ 2.76073e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.267977, 41.5364 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8289607.499419255
89
Actual reward of current solution: 46280004.745150626
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.45903e-13, 1 ]
  Objective coefficient range : [ 1.52696e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.535954, 43.9482 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8343219.7808102565
89
Actual reward of current solution: 46281458.44665289
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.35697e-12, 1 ]
  Objective coefficient range : [ 2.76073e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.267977, 46.36 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8289607.499419255
89
Actual reward of current solution: 46280004.745150626
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.45903e-13, 1 ]
  Objective coefficient range : [ 1.52696e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.535954, 48.2358 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8343219.7808102565
89
Actual reward of current solution: 46281458.44665289
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.35697e-12, 1 ]
  Objective coefficient range : [ 3.84347e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.267977, 46.36 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8289607.499419255
89
Actual reward of current solution: 46280004.745150626
Minimum Difference with past solutions:0.050000000000000024.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17997 Constrs, 9270 Vars, 8237293 NZs
  Matrix coefficient range    : [ 1.45903e-13, 1 ]
  Objective coefficient range : [ 1.52696e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.535954, 48.2358 ]
  RHS coefficient range       : [ 6.34229e-07, 48.2358 ]
Objective value for Line heur k = 1: 8343219.7808102565
Traceback (most recent call last):
  File "run_linearization_heuristic_test_targetting_value.py", line 541, in <module>
    main()
  File "run_linearization_heuristic_test_targetting_value.py", line 145, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 184, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, optimizeLockdowns)
  File "run_linearization_heuristic_test_targetting_value.py", line 325, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, False, 0.1,optimizeLockdowns)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1985, in run_heuristic_linearization
    Xhat_seq, uhat_seq = get_X_hat_sequence(dynModel, k, uhat_seq, use_bounce_var)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 463, in get_X_hat_sequence
    dynModel.take_time_step(m_tests, a_tests, alphas, BH, BICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 158, in take_time_step
    self.groups[n].take_time_step(m_tests[n], a_tests[n], self.beds, self.icus, B_H[n], B_ICU[n])
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 600, in take_time_step
    self.update_I(m_tests, a_tests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 684, in update_I
    assert self.I[self.parent.t]+delta_I*self.dt >= 0, (f'Total infected is negative: {self.I[self.parent.t]+delta_I*self.dt}. \n Infected time t: {self.I[self.parent.t]}. \n Delta I: {delta_I}.\n Total N time t: {self.N[self.parent.t]}.\n Total E time t: {self.E[self.parent.t]}.\n M tests at time t: {m_tests}.\n Total m_tests: {m_tests * self.dt * self.I[self.parent.t]/self.N[self.parent.t]}.\n  Total new infected: {self.dt * self.parameters["sigma"]*self.E[self.parent.t]}.\n  Total recovered or going to H, ICU: {self.dt * self.parameters["mu"]*self.I[self.parent.t]}')
AssertionError: Total infected is negative: -2.7591916586484216e-05. 
 Infected time t: 0.009283141378162014. 
 Delta I: -0.009310733294748498.
 Total N time t: 52.21963008919931.
 Total E time t: 0.006339951954385701.
 M tests at time t: 48.23582497798872.
 Total m_tests: 0.00857493593880442.
  Total new infected: 0.0015849879885964251.
  Total recovered or going to H, ICU: 0.0023207853445405035
srun: error: sh02-01n40: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=16317427.0
