{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.7417869892607294], 'icus': [2900], 'eta': [0.1245803389779404], 'tests': [[60000, 0]], 'xi': [22319418.0], 'testing': ['homogeneous']}}
results/time_gradient/xi-22319418_icus-2900_testing-homogeneous_natests-0_nmtests-60000_T-90_startday-0_groups-all_dschool-0.741787_eta-0.124580_freq-90-14_randomInstance-5.yaml
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.7417869892607294], 'icus': [2900], 'eta': [0.1245803389779404], 'tests': [[60000, 0]], 'xi': [22319418.0], 'testing': ['homogeneous']}}
results/dynamic_gradient/xi-22319418_icus-2900_testing-homogeneous_natests-0_nmtests-60000_T-90_startday-0_groups-all_dschool-0.741787_eta-0.124580_freq-90-14_randomInstance-5.yaml
200
(0.5, 223194180.0, 0.29, 6.0, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 0.05, 2, 'dynamic_gradient', 5)
The value of T is: 104
Missing starting point -- Running the initial heuristic.
/home/groups/daniancu/covid-optimization/covid-optimization
90
Total Reward at the start of the inner iterations: -116029311.3834171
Traceback (most recent call last):
  File "run_linearization_heuristic_robustness.py", line 876, in <module>
    main()
  File "run_linearization_heuristic_robustness.py", line 153, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, random_instance, nu, gamma)
  File "run_linearization_heuristic_robustness.py", line 192, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, random_instance, nu, gamma)
  File "run_linearization_heuristic_robustness.py", line 342, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests, deltaFairnessOne, deltaFair, optimizeLockdowns, averageLockConst, pLock, optimizeOnlyDeaths, random_instance)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1539, in run_heuristic_linearization
    constr_coefs, constr_consts, obj_coefs = calculate_all_coefs(dynModel,k,Xhat_seq,uhat_seq,Gamma_x,Gamma_u,D,E)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1133, in calculate_all_coefs
    gf_vec = get_F(dynModel, Xhat_t, uhat_t, t)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 663, in get_F
    dynModel.take_time_step(m_tests, a_tests, alphas, B_H, B_ICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 174, in take_time_step
    assert self.icus * self.dt - sum(state[n]["ICU"] for n in self.groups) > - 1e-10, f'Total ICU: {sum(state[n]["ICU"] for n in self.groups)}, total beds: {self.dt * self.icus}'
AssertionError: Total ICU: 0.36439647098371053, total beds: 0.29
srun: error: sh02-01n27: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=15979376.0
