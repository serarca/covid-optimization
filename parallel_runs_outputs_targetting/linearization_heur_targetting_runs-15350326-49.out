{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'icus': [2900], 'eta': [0.1], 'tests': [[429737, 0]], 'xi': [1859951.5], 'testing': ['homogeneous']}}
results/time_gradient/xi-1859951_icus-2900_testing-homogeneous_natests-0_nmtests-429737_T-90_startday-0_groups-all_dschool-0.500000_eta-0.100000_freq-90-14.yaml
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'icus': [2900], 'eta': [0.1], 'tests': [[429737, 0]], 'xi': [1859951.5], 'testing': ['homogeneous']}}
results/age_group_gradient/xi-1859951_icus-2900_testing-homogeneous_natests-0_nmtests-429737_T-90_startday-0_groups-all_dschool-0.500000_eta-0.100000_freq-90-14.yaml
50
(0.5, 0.29, 42.973734980389956, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 18599515.0, 0.05, 2, 'age_group_gradient')
Total Population is: 1227.820999439713
The value of T is: 104
Missing starting point -- Running the initial heuristic.
/home/groups/daniancu/covid-optimization/covid-optimization
90
Total Reward at the start of the inner iterations: 49177187.368386514
Using license file /share/software/user/restricted/gurobi/9.0.3_py36/licenses/gurobi.lic
Set parameter TokenServer to value license4.stanford.edu
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7603986 NZs
  Matrix coefficient range    : [ 1.12113e-13, 1 ]
  Objective coefficient range : [ 1.48925e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 6.92355 ]
  RHS coefficient range       : [ 3.24336e-07, 42.9737 ]
Objective value for Line heur k = 0: 28399549.77151458
90
Actual reward of current solution: 49072682.048485525
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8745435 NZs
  Matrix coefficient range    : [ 1.00032e-13, 1 ]
  Objective coefficient range : [ 2.53786e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 9.07223 ]
  RHS coefficient range       : [ 7.00726e-08, 42.9737 ]
Objective value for Line heur k = 0: 27614795.3427568
90
Actual reward of current solution: 49690372.341517664
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7702864 NZs
  Matrix coefficient range    : [ 1.00076e-13, 1 ]
  Objective coefficient range : [ 2.73042e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 11.2209 ]
  RHS coefficient range       : [ 1.77878e-07, 42.9737 ]
Objective value for Line heur k = 0: 31150389.00533636
90
Actual reward of current solution: 49453424.25710743
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8436444 NZs
  Matrix coefficient range    : [ 3.15531e-13, 1 ]
  Objective coefficient range : [ 3.61093e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 13.3696 ]
  RHS coefficient range       : [ 5.11991e-08, 42.9737 ]
Objective value for Line heur k = 0: 29367564.654740416
90
Actual reward of current solution: 49791623.829993054
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7393384 NZs
  Matrix coefficient range    : [ 1.49887e-13, 1 ]
  Objective coefficient range : [ 3.6735e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 15.5183 ]
  RHS coefficient range       : [ 5.38479e-08, 42.9737 ]
Objective value for Line heur k = 0: 31513782.312530696
90
Actual reward of current solution: 49495083.895535246
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8404422 NZs
  Matrix coefficient range    : [ 1.03114e-13, 1 ]
  Objective coefficient range : [ 8.00977e-21, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 17.667 ]
  RHS coefficient range       : [ 1.40244e-07, 42.9737 ]
Objective value for Line heur k = 0: 29460464.033775702
90
Actual reward of current solution: 49820846.177276246
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7362621 NZs
  Matrix coefficient range    : [ 1.00105e-13, 1 ]
  Objective coefficient range : [ 2.14243e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 19.8157 ]
  RHS coefficient range       : [ 1.65137e-08, 42.9737 ]
Objective value for Line heur k = 0: 31524534.60961464
90
Actual reward of current solution: 49513696.35239833
Minimum Difference with past solutions:0.1000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8396273 NZs
  Matrix coefficient range    : [ 1.00113e-13, 1 ]
  Objective coefficient range : [ 3.13202e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 21.9644 ]
  RHS coefficient range       : [ 3.03719e-07, 42.9737 ]
Objective value for Line heur k = 0: 29456350.128455825
90
Actual reward of current solution: 49846917.15378747
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7326618 NZs
  Matrix coefficient range    : [ 1.89334e-13, 1 ]
  Objective coefficient range : [ 1.29773e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 24.113 ]
  RHS coefficient range       : [ 1.20274e-07, 42.9737 ]
Objective value for Line heur k = 0: 31541206.827115472
90
Actual reward of current solution: 49533487.74592455
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8346536 NZs
  Matrix coefficient range    : [ 6.0418e-13, 1 ]
  Objective coefficient range : [ 7.35779e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 26.2617 ]
  RHS coefficient range       : [ 1.24355e-08, 42.9737 ]
Objective value for Line heur k = 0: 29449778.912433345
90
Actual reward of current solution: 49873089.410090715
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7298384 NZs
  Matrix coefficient range    : [ 2.10662e-13, 1 ]
  Objective coefficient range : [ 5.82445e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 24.113 ]
  RHS coefficient range       : [ 1.06299e-08, 42.9737 ]
Objective value for Line heur k = 0: 31561408.708760154
90
Actual reward of current solution: 49554282.00041592
Minimum Difference with past solutions:0.10000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8346536 NZs
  Matrix coefficient range    : [ 6.06201e-13, 1 ]
  Objective coefficient range : [ 1.76828e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 26.2617 ]
  RHS coefficient range       : [ 2.62681e-07, 42.9737 ]
Objective value for Line heur k = 0: 29446153.578601066
90
Actual reward of current solution: 49899367.60520438
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7298384 NZs
  Matrix coefficient range    : [ 2.11481e-13, 1 ]
  Objective coefficient range : [ 1.09675e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 24.113 ]
  RHS coefficient range       : [ 1.00847e-07, 42.9737 ]
Objective value for Line heur k = 0: 31582218.186195176
90
Actual reward of current solution: 49575577.116579995
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8346536 NZs
  Matrix coefficient range    : [ 6.08108e-13, 1 ]
  Objective coefficient range : [ 9.10618e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 26.2617 ]
  RHS coefficient range       : [ 1.05228e-07, 42.9737 ]
Objective value for Line heur k = 0: 29444717.482224643
90
Actual reward of current solution: 49925726.30792292
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7298384 NZs
  Matrix coefficient range    : [ 2.12286e-13, 1 ]
  Objective coefficient range : [ 9.71771e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 24.113 ]
  RHS coefficient range       : [ 4.39695e-08, 42.9737 ]
Objective value for Line heur k = 0: 31603415.344878335
90
Actual reward of current solution: 49597244.894626774
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8346536 NZs
  Matrix coefficient range    : [ 6.0993e-13, 1 ]
  Objective coefficient range : [ 1.91911e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 26.2617 ]
  RHS coefficient range       : [ 5.64409e-08, 42.9737 ]
Objective value for Line heur k = 0: 29444903.980012182
90
Actual reward of current solution: 49952143.43013004
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7298384 NZs
  Matrix coefficient range    : [ 2.13079e-13, 1 ]
  Objective coefficient range : [ 3.38052e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 24.113 ]
  RHS coefficient range       : [ 1.32957e-08, 42.9737 ]
Objective value for Line heur k = 0: 31624884.95332856
90
Actual reward of current solution: 49619199.859366745
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8346536 NZs
  Matrix coefficient range    : [ 6.11686e-13, 1 ]
  Objective coefficient range : [ 1.04941e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 26.2617 ]
  RHS coefficient range       : [ 2.22494e-07, 42.9737 ]
Objective value for Line heur k = 0: 29446332.37377526
90
Actual reward of current solution: 49978603.26885735
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7298384 NZs
  Matrix coefficient range    : [ 2.13866e-13, 1 ]
  Objective coefficient range : [ 6.67258e-21, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 28.4104 ]
  RHS coefficient range       : [ 7.0299e-08, 42.9737 ]
Objective value for Line heur k = 0: 31646544.85091898
90
Actual reward of current solution: 49641381.75488526
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8346536 NZs
  Matrix coefficient range    : [ 6.13388e-13, 1 ]
  Objective coefficient range : [ 7.51484e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 26.2617 ]
  RHS coefficient range       : [ 3.93038e-07, 42.9737 ]
Objective value for Line heur k = 0: 29448732.82572362
90
Actual reward of current solution: 50005094.1740946
Minimum Difference with past solutions:0.10000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7298384 NZs
  Matrix coefficient range    : [ 2.14646e-13, 1 ]
  Objective coefficient range : [ 8.07004e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 28.4104 ]
  RHS coefficient range       : [ 9.20332e-08, 42.9737 ]
Objective value for Line heur k = 0: 31647224.279876575
90
Actual reward of current solution: 49652543.49752701
Minimum Difference with past solutions:0.10000000000000002.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8346536 NZs
  Matrix coefficient range    : [ 6.14223e-13, 1 ]
  Objective coefficient range : [ 6.59786e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 30.5591 ]
  RHS coefficient range       : [ 8.47906e-08, 42.9737 ]
Objective value for Line heur k = 0: 29431220.799024723
90
Actual reward of current solution: 50005094.1740946
Minimum Difference with past solutions:0.1.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7298384 NZs
  Matrix coefficient range    : [ 2.14646e-13, 1 ]
  Objective coefficient range : [ 8.07004e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 32.7078 ]
  RHS coefficient range       : [ 9.20332e-08, 42.9737 ]
Objective value for Line heur k = 0: 31647224.279876575
90
Actual reward of current solution: 49652543.49752701
Minimum Difference with past solutions:0.09999999999999995.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8346536 NZs
  Matrix coefficient range    : [ 6.14223e-13, 1 ]
  Objective coefficient range : [ 6.59786e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 34.8565 ]
  RHS coefficient range       : [ 8.47906e-08, 42.9737 ]
Objective value for Line heur k = 0: 29431220.799024723
90
Actual reward of current solution: 50005094.1740946
Minimum Difference with past solutions:0.09999999999999995.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7298384 NZs
  Matrix coefficient range    : [ 2.14646e-13, 1 ]
  Objective coefficient range : [ 8.07004e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 37.0052 ]
  RHS coefficient range       : [ 9.20332e-08, 42.9737 ]
Objective value for Line heur k = 0: 31647224.279876575
90
Actual reward of current solution: 49652543.49752701
Minimum Difference with past solutions:0.09999999999999995.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8346536 NZs
  Matrix coefficient range    : [ 6.14223e-13, 1 ]
  Objective coefficient range : [ 6.59786e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 39.1538 ]
  RHS coefficient range       : [ 8.47906e-08, 42.9737 ]
Objective value for Line heur k = 0: 29431220.799024723
90
Actual reward of current solution: 50005094.1740946
Minimum Difference with past solutions:0.09999999999999995.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7298384 NZs
  Matrix coefficient range    : [ 2.14646e-13, 1 ]
  Objective coefficient range : [ 8.07004e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 41.3025 ]
  RHS coefficient range       : [ 9.20332e-08, 42.9737 ]
Objective value for Line heur k = 0: 31647224.279876575
90
Actual reward of current solution: 49652543.49752701
Minimum Difference with past solutions:0.1.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8346536 NZs
  Matrix coefficient range    : [ 6.14223e-13, 1 ]
  Objective coefficient range : [ 6.59786e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 42.9737 ]
  RHS coefficient range       : [ 8.47906e-08, 42.9737 ]
Objective value for Line heur k = 0: 29431220.799024723
90
Actual reward of current solution: 50005094.1740946
Minimum Difference with past solutions:0.0888888888888891.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7298384 NZs
  Matrix coefficient range    : [ 2.14646e-13, 1 ]
  Objective coefficient range : [ 8.07004e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 42.9737 ]
  RHS coefficient range       : [ 9.20332e-08, 42.9737 ]
Objective value for Line heur k = 0: 31647224.279876575
Traceback (most recent call last):
  File "run_linearization_heuristic_targetting_value.py", line 869, in <module>
    main()
  File "run_linearization_heuristic_targetting_value.py", line 141, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, targetActivities, targetGroups, targetTests)
  File "run_linearization_heuristic_targetting_value.py", line 180, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests)
  File "run_linearization_heuristic_targetting_value.py", line 322, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1941, in run_heuristic_linearization
    Xhat_seq, uhat_seq = get_X_hat_sequence(dynModel, k, uhat_seq, use_bounce_var)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 463, in get_X_hat_sequence
    dynModel.take_time_step(m_tests, a_tests, alphas, BH, BICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 158, in take_time_step
    self.groups[n].take_time_step(m_tests[n], a_tests[n], self.beds, self.icus, B_H[n], B_ICU[n])
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 600, in take_time_step
    self.update_I(m_tests, a_tests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 684, in update_I
    assert self.I[self.parent.t]+delta_I*self.dt >= 0, (f'Total infected is negative: {self.I[self.parent.t]+delta_I*self.dt}. \n Infected time t: {self.I[self.parent.t]}. \n Delta I: {delta_I}.\n Total N time t: {self.N[self.parent.t]}.\n Total E time t: {self.E[self.parent.t]}.\n M tests at time t: {m_tests}.\n Total m_tests: {m_tests * self.dt * self.I[self.parent.t]/self.N[self.parent.t]}.\n  Total new infected: {self.dt * self.parameters["sigma"]*self.E[self.parent.t]}.\n  Total recovered or going to H, ICU: {self.dt * self.parameters["mu"]*self.I[self.parent.t]}')
AssertionError: Total infected is negative: -2.7111774002908443e-05. 
 Infected time t: 0.009246565918123544. 
 Delta I: -0.009273677692126453.
 Total N time t: 53.00763248270531.
 Total E time t: 0.002136931232673734.
 M tests at time t: 42.973734980389956.
 Total m_tests: 0.007496269020764.
  Total new infected: 0.0005342328081684335.
  Total recovered or going to H, ICU: 0.002311641479530886
srun: error: sh02-01n44: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=15350326.0
