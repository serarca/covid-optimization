{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'icus': [2900], 'eta': [0.1], 'tests': [[620111, 0]], 'xi': [1859951.5], 'testing': ['homogeneous']}}
results/time_gradient/xi-1859951_icus-2900_testing-homogeneous_natests-0_nmtests-620111_T-90_startday-0_groups-all_dschool-0.500000_eta-0.100000_freq-90-14.yaml
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'icus': [2900], 'eta': [0.1], 'tests': [[620111, 0]], 'xi': [1859951.5], 'testing': ['homogeneous']}}
results/age_group_gradient/xi-1859951_icus-2900_testing-homogeneous_natests-0_nmtests-620111_T-90_startday-0_groups-all_dschool-0.500000_eta-0.100000_freq-90-14.yaml
100
(0.5, 0.29, 62.0111615878643, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 18599515.0, 0.05, 2, 'age_group_gradient')
Total Population is: 1227.820999439713
The value of T is: 104
Missing starting point -- Running the initial heuristic.
/home/groups/daniancu/covid-optimization/covid-optimization
90
Total Reward at the start of the inner iterations: 49700934.62805576
Using license file /share/software/user/restricted/gurobi/9.0.3_py36/licenses/gurobi.lic
Set parameter TokenServer to value license4.stanford.edu
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7603986 NZs
  Matrix coefficient range    : [ 1.28232e-13, 1 ]
  Objective coefficient range : [ 3.83131e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 9.99069 ]
  RHS coefficient range       : [ 7.51716e-08, 62.0112 ]
Objective value for Line heur k = 0: 31555850.103935502
90
Actual reward of current solution: 49756890.39418817
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8745441 NZs
  Matrix coefficient range    : [ 1.14691e-13, 1 ]
  Objective coefficient range : [ 1.9376e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 13.0912 ]
  RHS coefficient range       : [ 2.41147e-07, 62.0112 ]
Objective value for Line heur k = 0: 31413273.449697956
90
Actual reward of current solution: 50165004.16696475
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7978800 NZs
  Matrix coefficient range    : [ 1.00048e-13, 1 ]
  Objective coefficient range : [ 4.51314e-21, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 16.1918 ]
  RHS coefficient range       : [ 3.71226e-08, 62.0112 ]
Objective value for Line heur k = 0: 33668232.20335828
90
Actual reward of current solution: 50046187.66219385
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8480235 NZs
  Matrix coefficient range    : [ 1.04592e-13, 1 ]
  Objective coefficient range : [ 1.6504e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 19.2924 ]
  RHS coefficient range       : [ 3.49802e-08, 62.0112 ]
Objective value for Line heur k = 0: 32527284.616220225
90
Actual reward of current solution: 50306169.35053289
Minimum Difference with past solutions:0.10000000000000007.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7811243 NZs
  Matrix coefficient range    : [ 1.02821e-13, 1 ]
  Objective coefficient range : [ 7.60986e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 22.3929 ]
  RHS coefficient range       : [ 1.87386e-07, 62.0112 ]
Objective value for Line heur k = 0: 33817583.46154288
90
Actual reward of current solution: 50102676.30179617
Minimum Difference with past solutions:0.10000000000000007.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8433689 NZs
  Matrix coefficient range    : [ 2.01394e-13, 1 ]
  Objective coefficient range : [ 6.65532e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 25.4935 ]
  RHS coefficient range       : [ 3.55903e-07, 62.0112 ]
Objective value for Line heur k = 0: 32406069.4818636
90
Actual reward of current solution: 50426126.36615035
Minimum Difference with past solutions:0.1000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7793939 NZs
  Matrix coefficient range    : [ 1.03263e-13, 1 ]
  Objective coefficient range : [ 1.09092e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 28.594 ]
  RHS coefficient range       : [ 4.95968e-08, 62.0112 ]
Objective value for Line heur k = 0: 33884094.94116612
90
Actual reward of current solution: 50166388.07068362
Minimum Difference with past solutions:0.10000000000000013.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8450580 NZs
  Matrix coefficient range    : [ 2.15026e-13, 1 ]
  Objective coefficient range : [ 2.84956e-19, 2.3828e+07 ]
  Variable bound range        : [ 5.32907e-15, 31.6946 ]
  RHS coefficient range       : [ 1.28948e-07, 62.0112 ]
Objective value for Line heur k = 0: 32323675.51699795
90
Actual reward of current solution: 50546539.88866353
Minimum Difference with past solutions:0.10000000000000016.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7793943 NZs
  Matrix coefficient range    : [ 1.02311e-13, 1 ]
  Objective coefficient range : [ 1.05845e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 31.6946 ]
  RHS coefficient range       : [ 1.43708e-08, 62.0112 ]
Objective value for Line heur k = 0: 33967949.41828873
90
Actual reward of current solution: 50247177.33516912
Minimum Difference with past solutions:0.10000000000000013.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8449155 NZs
  Matrix coefficient range    : [ 2.27424e-13, 1 ]
  Objective coefficient range : [ 1.90282e-18, 2.3828e+07 ]
  Variable bound range        : [ 5.32907e-15, 34.7952 ]
  RHS coefficient range       : [ 2.21423e-07, 62.0112 ]
Objective value for Line heur k = 0: 32266788.39826426
90
Actual reward of current solution: 50676624.202599026
Minimum Difference with past solutions:0.10000000000000012.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7792525 NZs
  Matrix coefficient range    : [ 1.01492e-13, 1 ]
  Objective coefficient range : [ 1.69541e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 31.6946 ]
  RHS coefficient range       : [ 3.46488e-08, 62.0112 ]
Objective value for Line heur k = 0: 34077134.80351285
90
Actual reward of current solution: 50336818.305679925
Minimum Difference with past solutions:0.10000000000000003.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8432264 NZs
  Matrix coefficient range    : [ 2.36375e-13, 1 ]
  Objective coefficient range : [ 8.0645e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 34.7952 ]
  RHS coefficient range       : [ 7.26078e-08, 62.0112 ]
Objective value for Line heur k = 0: 32262793.95269533
90
Actual reward of current solution: 50799839.73094479
Minimum Difference with past solutions:0.10000000000000007.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7792526 NZs
  Matrix coefficient range    : [ 1.02001e-13, 1 ]
  Objective coefficient range : [ 5.27175e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 34.7952 ]
  RHS coefficient range       : [ 4.33992e-08, 62.0112 ]
Objective value for Line heur k = 0: 34162680.66290658
90
Actual reward of current solution: 50421743.065638386
Minimum Difference with past solutions:0.10000000000000007.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8432264 NZs
  Matrix coefficient range    : [ 2.48247e-13, 1 ]
  Objective coefficient range : [ 1.59589e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 34.7952 ]
  RHS coefficient range       : [ 8.3332e-09, 62.0112 ]
Objective value for Line heur k = 0: 32232033.72175594
90
Actual reward of current solution: 50931257.62692888
Minimum Difference with past solutions:0.10000000000000013.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7792528 NZs
  Matrix coefficient range    : [ 1.00402e-13, 1 ]
  Objective coefficient range : [ 2.01362e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 34.7952 ]
  RHS coefficient range       : [ 1.47016e-07, 62.0112 ]
Objective value for Line heur k = 0: 34270892.040388376
90
Actual reward of current solution: 50512846.66456258
Minimum Difference with past solutions:0.10000000000000007.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8432264 NZs
  Matrix coefficient range    : [ 2.57384e-13, 1 ]
  Objective coefficient range : [ 3.72232e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 37.8957 ]
  RHS coefficient range       : [ 2.10798e-07, 62.0112 ]
Objective value for Line heur k = 0: 32236646.75625918
90
Actual reward of current solution: 51060109.077069774
Minimum Difference with past solutions:0.10000000000000007.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7792530 NZs
  Matrix coefficient range    : [ 1.00285e-13, 1 ]
  Objective coefficient range : [ 1.15793e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 34.7952 ]
  RHS coefficient range       : [ 3.08981e-09, 62.0112 ]
Objective value for Line heur k = 0: 34376695.29346257
90
Actual reward of current solution: 50600788.52586037
Minimum Difference with past solutions:0.10000000000000019.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8449155 NZs
  Matrix coefficient range    : [ 2.68642e-13, 1 ]
  Objective coefficient range : [ 3.93903e-19, 2.3828e+07 ]
  Variable bound range        : [ 8.88178e-15, 37.8957 ]
  RHS coefficient range       : [ 2.15961e-07, 62.0112 ]
Objective value for Line heur k = 0: 32215495.56732255
90
Actual reward of current solution: 51187982.63648105
Minimum Difference with past solutions:0.10000000000000019.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7792530 NZs
  Matrix coefficient range    : [ 1.02896e-13, 1 ]
  Objective coefficient range : [ 2.76557e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 40.9963 ]
  RHS coefficient range       : [ 6.81759e-08, 62.0112 ]
Objective value for Line heur k = 0: 34486493.67446897
90
Actual reward of current solution: 50697476.08250158
Minimum Difference with past solutions:0.10000000000000031.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8449155 NZs
  Matrix coefficient range    : [ 2.78882e-13, 1 ]
  Objective coefficient range : [ 2.00904e-20, 2.3828e+07 ]
  Variable bound range        : [ 1.59872e-14, 44.0968 ]
  RHS coefficient range       : [ 1.51832e-07, 62.0112 ]
Objective value for Line heur k = 0: 32198910.296029158
90
Actual reward of current solution: 51315593.28300966
Minimum Difference with past solutions:0.10000000000000031.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7792532 NZs
  Matrix coefficient range    : [ 1.02372e-13, 1 ]
  Objective coefficient range : [ 6.42118e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 47.1974 ]
  RHS coefficient range       : [ 1.20926e-07, 62.0112 ]
Objective value for Line heur k = 0: 34545323.433708556
90
Actual reward of current solution: 50776314.90910219
Minimum Difference with past solutions:0.10000000000000042.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8449155 NZs
  Matrix coefficient range    : [ 2.85517e-13, 1 ]
  Objective coefficient range : [ 5.13596e-19, 2.3828e+07 ]
  Variable bound range        : [ 2.30926e-14, 50.2979 ]
  RHS coefficient range       : [ 7.89605e-10, 62.0112 ]
Objective value for Line heur k = 0: 32164810.6389474
Traceback (most recent call last):
  File "run_linearization_heuristic_targetting_value.py", line 869, in <module>
    main()
  File "run_linearization_heuristic_targetting_value.py", line 141, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, targetActivities, targetGroups, targetTests)
  File "run_linearization_heuristic_targetting_value.py", line 180, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests)
  File "run_linearization_heuristic_targetting_value.py", line 322, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1941, in run_heuristic_linearization
    Xhat_seq, uhat_seq = get_X_hat_sequence(dynModel, k, uhat_seq, use_bounce_var)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 463, in get_X_hat_sequence
    dynModel.take_time_step(m_tests, a_tests, alphas, BH, BICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 158, in take_time_step
    self.groups[n].take_time_step(m_tests[n], a_tests[n], self.beds, self.icus, B_H[n], B_ICU[n])
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 600, in take_time_step
    self.update_I(m_tests, a_tests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 684, in update_I
    assert self.I[self.parent.t]+delta_I*self.dt >= 0, (f'Total infected is negative: {self.I[self.parent.t]+delta_I*self.dt}. \n Infected time t: {self.I[self.parent.t]}. \n Delta I: {delta_I}.\n Total N time t: {self.N[self.parent.t]}.\n Total E time t: {self.E[self.parent.t]}.\n M tests at time t: {m_tests}.\n Total m_tests: {m_tests * self.dt * self.I[self.parent.t]/self.N[self.parent.t]}.\n  Total new infected: {self.dt * self.parameters["sigma"]*self.E[self.parent.t]}.\n  Total recovered or going to H, ICU: {self.dt * self.parameters["mu"]*self.I[self.parent.t]}')
AssertionError: Total infected is negative: -9.431691401526939e-05. 
 Infected time t: 0.0017397577353480125. 
 Delta I: -0.0018340746493632819.
 Total N time t: 53.080705311176125.
 Total E time t: 0.0009976619436960327.
 M tests at time t: 50.297942176823284.
 Total m_tests: 0.0016485507014502869.
  Total new infected: 0.0002494154859240082.
  Total recovered or going to H, ICU: 0.0004349394338370031
srun: error: sh02-01n30: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=15344391.0
