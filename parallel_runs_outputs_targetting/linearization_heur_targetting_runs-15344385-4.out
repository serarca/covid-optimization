{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'icus': [2900], 'eta': [0.1], 'tests': [[496089, 0]], 'xi': [1859951.5], 'testing': ['homogeneous']}}
results/time_gradient/xi-1859951_icus-2900_testing-homogeneous_natests-0_nmtests-496089_T-90_startday-0_groups-all_dschool-0.500000_eta-0.100000_freq-90-14.yaml
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'icus': [2900], 'eta': [0.1], 'tests': [[496089, 0]], 'xi': [1859951.5], 'testing': ['homogeneous']}}
results/age_group_gradient/xi-1859951_icus-2900_testing-homogeneous_natests-0_nmtests-496089_T-90_startday-0_groups-all_dschool-0.500000_eta-0.100000_freq-90-14.yaml
100
(0.5, 0.29, 49.60892927029144, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 18599515.0, 0.05, 2, 'age_group_gradient')
Total Population is: 1227.820999439713
The value of T is: 104
Missing starting point -- Running the initial heuristic.
/home/groups/daniancu/covid-optimization/covid-optimization
90
Total Reward at the start of the inner iterations: 49385146.828471616
Using license file /share/software/user/restricted/gurobi/9.0.3_py36/licenses/gurobi.lic
Set parameter TokenServer to value license4.stanford.edu
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7603986 NZs
  Matrix coefficient range    : [ 1.19104e-13, 1 ]
  Objective coefficient range : [ 4.40992e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 7.99255 ]
  RHS coefficient range       : [ 8.58287e-09, 49.6089 ]
Objective value for Line heur k = 0: 29682928.143847533
90
Actual reward of current solution: 49350260.56876095
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8745441 NZs
  Matrix coefficient range    : [ 1.04584e-13, 1 ]
  Objective coefficient range : [ 7.46547e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 10.473 ]
  RHS coefficient range       : [ 1.64696e-07, 49.6089 ]
Objective value for Line heur k = 0: 29198034.900224946
90
Actual reward of current solution: 49882047.0250956
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7827915 NZs
  Matrix coefficient range    : [ 1.00175e-13, 1 ]
  Objective coefficient range : [ 6.32947e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 12.9534 ]
  RHS coefficient range       : [ 1.36699e-08, 49.6089 ]
Objective value for Line heur k = 0: 32236102.96316288
90
Actual reward of current solution: 49693531.63608079
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8436444 NZs
  Matrix coefficient range    : [ 2.80896e-13, 1 ]
  Objective coefficient range : [ 7.1694e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 15.4339 ]
  RHS coefficient range       : [ 1.52048e-07, 49.6089 ]
Objective value for Line heur k = 0: 30723753.81536076
90
Actual reward of current solution: 49978769.48245195
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7518383 NZs
  Matrix coefficient range    : [ 1.36871e-13, 1 ]
  Objective coefficient range : [ 2.66412e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 17.9143 ]
  RHS coefficient range       : [ 4.27948e-08, 49.6089 ]
Objective value for Line heur k = 0: 32551598.54392729
90
Actual reward of current solution: 49718666.99939985
Minimum Difference with past solutions:0.1000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8395214 NZs
  Matrix coefficient range    : [ 2.71697e-13, 1 ]
  Objective coefficient range : [ 8.66146e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 20.3948 ]
  RHS coefficient range       : [ 1.38983e-07, 49.6089 ]
Objective value for Line heur k = 0: 30764393.374825254
90
Actual reward of current solution: 50012522.71372197
Minimum Difference with past solutions:0.1000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7459559 NZs
  Matrix coefficient range    : [ 2.60545e-13, 1 ]
  Objective coefficient range : [ 4.92022e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 22.8752 ]
  RHS coefficient range       : [ 1.56461e-07, 49.6089 ]
Objective value for Line heur k = 0: 32583408.019340254
90
Actual reward of current solution: 49737019.82362881
Minimum Difference with past solutions:0.10000000000000012.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8405455 NZs
  Matrix coefficient range    : [ 1.78843e-13, 1 ]
  Objective coefficient range : [ 7.72796e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 25.3557 ]
  RHS coefficient range       : [ 2.20018e-08, 49.6089 ]
Objective value for Line heur k = 0: 30766100.639220573
90
Actual reward of current solution: 50045082.299008496
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7459559 NZs
  Matrix coefficient range    : [ 2.94554e-13, 1 ]
  Objective coefficient range : [ 1.01836e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 27.8361 ]
  RHS coefficient range       : [ 5.6533e-09, 49.6089 ]
Objective value for Line heur k = 0: 32626932.37097141
90
Actual reward of current solution: 49758073.99366661
Minimum Difference with past solutions:0.10000000000000012.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8404030 NZs
  Matrix coefficient range    : [ 1.80656e-13, 1 ]
  Objective coefficient range : [ 1.72379e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 30.3166 ]
  RHS coefficient range       : [ 1.65107e-07, 49.6089 ]
Objective value for Line heur k = 0: 30769045.127902746
90
Actual reward of current solution: 50077855.36765171
Minimum Difference with past solutions:0.1.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7458134 NZs
  Matrix coefficient range    : [ 2.96182e-13, 1 ]
  Objective coefficient range : [ 5.02829e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 27.8361 ]
  RHS coefficient range       : [ 2.26526e-07, 49.6089 ]
Objective value for Line heur k = 0: 32669020.445887733
90
Actual reward of current solution: 49780467.576505944
Minimum Difference with past solutions:0.10000000000000007.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8404030 NZs
  Matrix coefficient range    : [ 1.82345e-13, 1 ]
  Objective coefficient range : [ 5.71232e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 30.3166 ]
  RHS coefficient range       : [ 6.36315e-08, 49.6089 ]
Objective value for Line heur k = 0: 30776007.40820348
90
Actual reward of current solution: 50110785.767440245
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7458134 NZs
  Matrix coefficient range    : [ 2.9502e-13, 1 ]
  Objective coefficient range : [ 1.16735e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 27.8361 ]
  RHS coefficient range       : [ 1.12524e-07, 49.6089 ]
Objective value for Line heur k = 0: 32711696.49133971
90
Actual reward of current solution: 49803851.66649255
Minimum Difference with past solutions:0.10000000000000012.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8404030 NZs
  Matrix coefficient range    : [ 1.83941e-13, 1 ]
  Objective coefficient range : [ 1.22692e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 30.3166 ]
  RHS coefficient range       : [ 3.35417e-08, 49.6089 ]
Objective value for Line heur k = 0: 30786119.647182986
90
Actual reward of current solution: 50143831.32756319
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7458134 NZs
  Matrix coefficient range    : [ 2.87941e-13, 1 ]
  Objective coefficient range : [ 2.44926e-21, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 32.797 ]
  RHS coefficient range       : [ 3.84879e-09, 49.6089 ]
Objective value for Line heur k = 0: 32754808.337118458
90
Actual reward of current solution: 49827981.65944838
Minimum Difference with past solutions:0.10000000000000012.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8404030 NZs
  Matrix coefficient range    : [ 1.85467e-13, 1 ]
  Objective coefficient range : [ 8.93485e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 35.2775 ]
  RHS coefficient range       : [ 1.27588e-07, 49.6089 ]
Objective value for Line heur k = 0: 30798603.85386715
90
Actual reward of current solution: 50176466.46966302
Minimum Difference with past solutions:0.1000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7458134 NZs
  Matrix coefficient range    : [ 2.82234e-13, 1 ]
  Objective coefficient range : [ 1.44203e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 37.7579 ]
  RHS coefficient range       : [ 1.14928e-07, 49.6089 ]
Objective value for Line heur k = 0: 32794617.33627014
90
Actual reward of current solution: 49852546.057636485
Minimum Difference with past solutions:0.10000000000000012.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8404030 NZs
  Matrix coefficient range    : [ 1.87019e-13, 1 ]
  Objective coefficient range : [ 7.95025e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 40.2384 ]
  RHS coefficient range       : [ 1.15202e-08, 49.6089 ]
Objective value for Line heur k = 0: 30818156.219908513
90
Actual reward of current solution: 50209706.61276502
Minimum Difference with past solutions:0.1000000000000001.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7458134 NZs
  Matrix coefficient range    : [ 2.77536e-13, 1 ]
  Objective coefficient range : [ 4.36742e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 42.7188 ]
  RHS coefficient range       : [ 2.45674e-07, 49.6089 ]
Objective value for Line heur k = 0: 32835661.363157094
90
Actual reward of current solution: 49877213.04873036
Minimum Difference with past solutions:0.10000000000000012.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8404030 NZs
  Matrix coefficient range    : [ 1.883e-13, 1 ]
  Objective coefficient range : [ 2.73348e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 40.2384 ]
  RHS coefficient range       : [ 1.66258e-07, 49.6089 ]
Objective value for Line heur k = 0: 30835737.247951645
90
Actual reward of current solution: 50243012.38811148
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7458134 NZs
  Matrix coefficient range    : [ 2.73605e-13, 1 ]
  Objective coefficient range : [ 5.31455e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 37.7579 ]
  RHS coefficient range       : [ 2.75554e-07, 49.6089 ]
Objective value for Line heur k = 0: 32842267.282450322
90
Actual reward of current solution: 49890220.029899135
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8404030 NZs
  Matrix coefficient range    : [ 1.89068e-13, 1 ]
  Objective coefficient range : [ 3.84652e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 40.2384 ]
  RHS coefficient range       : [ 2.56918e-07, 49.6089 ]
Objective value for Line heur k = 0: 30817637.670371544
90
Actual reward of current solution: 50243012.38811148
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7458134 NZs
  Matrix coefficient range    : [ 2.73605e-13, 1 ]
  Objective coefficient range : [ 5.31455e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 42.7188 ]
  RHS coefficient range       : [ 2.75554e-07, 49.6089 ]
Objective value for Line heur k = 0: 32842267.282450322
90
Actual reward of current solution: 49890220.029899135
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8404030 NZs
  Matrix coefficient range    : [ 1.89068e-13, 1 ]
  Objective coefficient range : [ 1.87537e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 45.1992 ]
  RHS coefficient range       : [ 2.56918e-07, 49.6089 ]
Objective value for Line heur k = 0: 30817637.670371544
90
Actual reward of current solution: 50243012.38811148
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7458134 NZs
  Matrix coefficient range    : [ 2.73605e-13, 1 ]
  Objective coefficient range : [ 8.06957e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 47.6797 ]
  RHS coefficient range       : [ 2.75554e-07, 49.6089 ]
Objective value for Line heur k = 0: 32842267.282450322
Traceback (most recent call last):
  File "run_linearization_heuristic_targetting_value.py", line 869, in <module>
    main()
  File "run_linearization_heuristic_targetting_value.py", line 141, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, targetActivities, targetGroups, targetTests)
  File "run_linearization_heuristic_targetting_value.py", line 180, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests)
  File "run_linearization_heuristic_targetting_value.py", line 322, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1941, in run_heuristic_linearization
    Xhat_seq, uhat_seq = get_X_hat_sequence(dynModel, k, uhat_seq, use_bounce_var)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 463, in get_X_hat_sequence
    dynModel.take_time_step(m_tests, a_tests, alphas, BH, BICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 158, in take_time_step
    self.groups[n].take_time_step(m_tests[n], a_tests[n], self.beds, self.icus, B_H[n], B_ICU[n])
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 600, in take_time_step
    self.update_I(m_tests, a_tests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 684, in update_I
    assert self.I[self.parent.t]+delta_I*self.dt >= 0, (f'Total infected is negative: {self.I[self.parent.t]+delta_I*self.dt}. \n Infected time t: {self.I[self.parent.t]}. \n Delta I: {delta_I}.\n Total N time t: {self.N[self.parent.t]}.\n Total E time t: {self.E[self.parent.t]}.\n M tests at time t: {m_tests}.\n Total m_tests: {m_tests * self.dt * self.I[self.parent.t]/self.N[self.parent.t]}.\n  Total new infected: {self.dt * self.parameters["sigma"]*self.E[self.parent.t]}.\n  Total recovered or going to H, ICU: {self.dt * self.parameters["mu"]*self.I[self.parent.t]}')
AssertionError: Total infected is negative: -2.0105990072562425e-05. 
 Infected time t: 0.002987835636890659. 
 Delta I: -0.0030079416269632214.
 Total N time t: 53.025710160357605.
 Total E time t: 0.0017024852253042836.
 M tests at time t: 47.67969313200234.
 Total m_tests: 0.0026866040240666276.
  Total new infected: 0.0004256213063260709.
  Total recovered or going to H, ICU: 0.0007469589092226648
srun: error: sh02-01n30: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=15344390.0
