{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'icus': [2900], 'eta': [0.1], 'tests': [[744133, 0]], 'xi': [1859951.5], 'testing': ['homogeneous']}}
results/time_gradient/xi-1859951_icus-2900_testing-homogeneous_natests-0_nmtests-744133_T-90_startday-0_groups-all_dschool-0.500000_eta-0.100000_freq-90-14.yaml
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'icus': [2900], 'eta': [0.1], 'tests': [[744133, 0]], 'xi': [1859951.5], 'testing': ['homogeneous']}}
results/age_group_gradient/xi-1859951_icus-2900_testing-homogeneous_natests-0_nmtests-744133_T-90_startday-0_groups-all_dschool-0.500000_eta-0.100000_freq-90-14.yaml
100
(0.5, 0.29, 74.41339390543716, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 18599515.0, 0.05, 2, 'age_group_gradient')
Total Population is: 1227.820999439713
The value of T is: 104
Missing starting point -- Running the initial heuristic.
/home/groups/daniancu/covid-optimization/covid-optimization
90
Total Reward at the start of the inner iterations: 49942380.519549206
Using license file /share/software/user/restricted/gurobi/9.0.3_py36/licenses/gurobi.lic
Set parameter TokenServer to value license4.stanford.edu
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7603986 NZs
  Matrix coefficient range    : [ 1.33511e-13, 1 ]
  Objective coefficient range : [ 3.93065e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 11.9888 ]
  RHS coefficient range       : [ 1.21789e-07, 74.4134 ]
Objective value for Line heur k = 0: 32907210.007563956
90
Actual reward of current solution: 50053958.25776525
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8745441 NZs
  Matrix coefficient range    : [ 1.06541e-13, 1 ]
  Objective coefficient range : [ 5.58491e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 15.7095 ]
  RHS coefficient range       : [ 2.62179e-07, 74.4134 ]
Objective value for Line heur k = 0: 32942183.63080574
90
Actual reward of current solution: 50388768.383425616
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8231832 NZs
  Matrix coefficient range    : [ 1.00062e-13, 1 ]
  Objective coefficient range : [ 3.26806e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 19.4302 ]
  RHS coefficient range       : [ 2.32848e-07, 74.4134 ]
Objective value for Line heur k = 0: 34564194.183687374
90
Actual reward of current solution: 50320288.40786628
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8499921 NZs
  Matrix coefficient range    : [ 1.13818e-13, 1 ]
  Objective coefficient range : [ 7.37951e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 23.1508 ]
  RHS coefficient range       : [ 5.86972e-09, 74.4134 ]
Objective value for Line heur k = 0: 33726595.17890899
90
Actual reward of current solution: 50517428.699661195
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8093099 NZs
  Matrix coefficient range    : [ 1.00772e-13, 1 ]
  Objective coefficient range : [ 3.21538e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 26.8715 ]
  RHS coefficient range       : [ 6.42856e-08, 74.4134 ]
Objective value for Line heur k = 0: 34487874.69362375
90
Actual reward of current solution: 50391663.109134726
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8463747 NZs
  Matrix coefficient range    : [ 1.92385e-13, 1 ]
  Objective coefficient range : [ 3.76037e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 30.5922 ]
  RHS coefficient range       : [ 2.63261e-07, 74.4134 ]
Objective value for Line heur k = 0: 33473359.80232162
90
Actual reward of current solution: 50668644.98956369
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8065278 NZs
  Matrix coefficient range    : [ 1.03116e-13, 1 ]
  Objective coefficient range : [ 1.31302e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 34.3128 ]
  RHS coefficient range       : [ 1.78189e-07, 74.4134 ]
Objective value for Line heur k = 0: 34515139.58781781
90
Actual reward of current solution: 50492603.7991393
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8463728 NZs
  Matrix coefficient range    : [ 1.00252e-13, 1 ]
  Objective coefficient range : [ 1.64615e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 38.0335 ]
  RHS coefficient range       : [ 6.08363e-08, 74.4134 ]
Objective value for Line heur k = 0: 33321264.60433194
90
Actual reward of current solution: 50813879.755429894
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8063854 NZs
  Matrix coefficient range    : [ 1.01975e-13, 1 ]
  Objective coefficient range : [ 7.06705e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 35.1397 ]
  RHS coefficient range       : [ 8.48943e-09, 74.4134 ]
Objective value for Line heur k = 0: 34539457.75693706
90
Actual reward of current solution: 50608307.15827641
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8462312 NZs
  Matrix coefficient range    : [ 1.02293e-13, 1 ]
  Objective coefficient range : [ 1.13054e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 38.8603 ]
  RHS coefficient range       : [ 3.52527e-07, 74.4134 ]
Objective value for Line heur k = 0: 33242451.382175297
90
Actual reward of current solution: 50989462.08142945
Minimum Difference with past solutions:0.1.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8063854 NZs
  Matrix coefficient range    : [ 1.09323e-13, 1 ]
  Objective coefficient range : [ 1.71016e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 35.1397 ]
  RHS coefficient range       : [ 7.94211e-08, 74.4134 ]
Objective value for Line heur k = 0: 34636521.57542705
90
Actual reward of current solution: 50711142.47664353
Minimum Difference with past solutions:0.1.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8462314 NZs
  Matrix coefficient range    : [ 1.0075e-13, 1 ]
  Objective coefficient range : [ 1.00852e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 38.8603 ]
  RHS coefficient range       : [ 4.25793e-07, 74.4134 ]
Objective value for Line heur k = 0: 33094042.464617494
90
Actual reward of current solution: 51141174.28874602
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8063854 NZs
  Matrix coefficient range    : [ 1.17773e-13, 1 ]
  Objective coefficient range : [ 2.8153e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 41.7542 ]
  RHS coefficient range       : [ 1.80138e-07, 74.4134 ]
Objective value for Line heur k = 0: 34677951.89772941
90
Actual reward of current solution: 50834222.55123173
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8462315 NZs
  Matrix coefficient range    : [ 1.04763e-13, 1 ]
  Objective coefficient range : [ 5.48202e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 45.4749 ]
  RHS coefficient range       : [ 5.55083e-08, 74.4134 ]
Objective value for Line heur k = 0: 33034229.726448596
90
Actual reward of current solution: 51311848.33331094
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8062125 NZs
  Matrix coefficient range    : [ 1.23616e-13, 1 ]
  Objective coefficient range : [ 7.71224e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 41.7542 ]
  RHS coefficient range       : [ 1.88138e-07, 74.4134 ]
Objective value for Line heur k = 0: 34730304.382138
90
Actual reward of current solution: 50955227.02276999
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8460588 NZs
  Matrix coefficient range    : [ 1.02003e-13, 1 ]
  Objective coefficient range : [ 1.62949e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 45.4749 ]
  RHS coefficient range       : [ 1.82751e-07, 74.4134 ]
Objective value for Line heur k = 0: 32949133.421895534
90
Actual reward of current solution: 51476098.86903425
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8063854 NZs
  Matrix coefficient range    : [ 1.98552e-13, 1 ]
  Objective coefficient range : [ 4.00576e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 41.7542 ]
  RHS coefficient range       : [ 2.49577e-07, 74.4134 ]
Objective value for Line heur k = 0: 34809772.74097736
90
Actual reward of current solution: 51077235.340818204
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8460588 NZs
  Matrix coefficient range    : [ 1.08387e-13, 1 ]
  Objective coefficient range : [ 3.84323e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 38.8603 ]
  RHS coefficient range       : [ 2.22581e-07, 74.4134 ]
Objective value for Line heur k = 0: 32889069.571146682
90
Actual reward of current solution: 51637673.89650545
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8063854 NZs
  Matrix coefficient range    : [ 2.12233e-13, 1 ]
  Objective coefficient range : [ 3.36398e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 41.7542 ]
  RHS coefficient range       : [ 2.04054e-07, 74.4134 ]
Objective value for Line heur k = 0: 34860041.93699889
90
Actual reward of current solution: 51191596.93913678
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8458860 NZs
  Matrix coefficient range    : [ 1.05075e-13, 1 ]
  Objective coefficient range : [ 1.45929e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 38.8603 ]
  RHS coefficient range       : [ 2.27855e-07, 74.4134 ]
Objective value for Line heur k = 0: 32805600.93625167
90
Actual reward of current solution: 51792022.28350736
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8062125 NZs
  Matrix coefficient range    : [ 2.30207e-13, 1 ]
  Objective coefficient range : [ 3.87834e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 41.7542 ]
  RHS coefficient range       : [ 9.21753e-08, 74.4134 ]
Objective value for Line heur k = 0: 34800744.7698648
90
Actual reward of current solution: 51265807.73474869
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8458860 NZs
  Matrix coefficient range    : [ 1.10686e-13, 1 ]
  Objective coefficient range : [ 4.26608e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 45.4749 ]
  RHS coefficient range       : [ 9.38405e-09, 74.4134 ]
Objective value for Line heur k = 0: 32593015.330938432
Traceback (most recent call last):
  File "run_linearization_heuristic_targetting_value.py", line 869, in <module>
    main()
  File "run_linearization_heuristic_targetting_value.py", line 141, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, targetActivities, targetGroups, targetTests)
  File "run_linearization_heuristic_targetting_value.py", line 180, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests)
  File "run_linearization_heuristic_targetting_value.py", line 322, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1941, in run_heuristic_linearization
    Xhat_seq, uhat_seq = get_X_hat_sequence(dynModel, k, uhat_seq, use_bounce_var)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 463, in get_X_hat_sequence
    dynModel.take_time_step(m_tests, a_tests, alphas, BH, BICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 158, in take_time_step
    self.groups[n].take_time_step(m_tests[n], a_tests[n], self.beds, self.icus, B_H[n], B_ICU[n])
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 600, in take_time_step
    self.update_I(m_tests, a_tests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 684, in update_I
    assert self.I[self.parent.t]+delta_I*self.dt >= 0, (f'Total infected is negative: {self.I[self.parent.t]+delta_I*self.dt}. \n Infected time t: {self.I[self.parent.t]}. \n Delta I: {delta_I}.\n Total N time t: {self.N[self.parent.t]}.\n Total E time t: {self.E[self.parent.t]}.\n M tests at time t: {m_tests}.\n Total m_tests: {m_tests * self.dt * self.I[self.parent.t]/self.N[self.parent.t]}.\n  Total new infected: {self.dt * self.parameters["sigma"]*self.E[self.parent.t]}.\n  Total recovered or going to H, ICU: {self.dt * self.parameters["mu"]*self.I[self.parent.t]}')
AssertionError: Total infected is negative: -0.000207184640026367. 
 Infected time t: 0.004245871354173386. 
 Delta I: -0.004453055994199753.
 Total N time t: 53.03714574763164.
 Total E time t: 0.0009955449307373918.
 M tests at time t: 45.474851831100494.
 Total m_tests: 0.0036404743883407544.
  Total new infected: 0.00024888623268434795.
  Total recovered or going to H, ICU: 0.0010614678385433465
srun: error: sh02-01n30: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=15344392.0
