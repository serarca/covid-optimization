{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'icus': [2900], 'eta': [0.1], 'tests': [[992178, 0]], 'xi': [1859951.5], 'testing': ['homogeneous']}}
results/time_gradient/xi-1859951_icus-2900_testing-homogeneous_natests-0_nmtests-992178_T-90_startday-0_groups-all_dschool-0.500000_eta-0.100000_freq-90-14.yaml
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'icus': [2900], 'eta': [0.1], 'tests': [[992178, 0]], 'xi': [1859951.5], 'testing': ['homogeneous']}}
results/age_group_gradient/xi-1859951_icus-2900_testing-homogeneous_natests-0_nmtests-992178_T-90_startday-0_groups-all_dschool-0.500000_eta-0.100000_freq-90-14.yaml
100
(0.5, 0.29, 99.21785854058288, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 18599515.0, 0.05, 2, 'age_group_gradient')
Total Population is: 1227.820999439713
The value of T is: 104
Missing starting point -- Running the initial heuristic.
/home/groups/daniancu/covid-optimization/covid-optimization
90
Total Reward at the start of the inner iterations: 50272531.873307735
Using license file /share/software/user/restricted/gurobi/9.0.3_py36/licenses/gurobi.lic
Set parameter TokenServer to value license4.stanford.edu
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8745441 NZs
  Matrix coefficient range    : [ 1.10799e-13, 14.2809 ]
  Objective coefficient range : [ 1.92893e-19, 6.00691e+08 ]
  Variable bound range        : [ 0.05, 15.9851 ]
  RHS coefficient range       : [ 1.30147e-07, 99.2179 ]
Objective value for Line heur k = 0: 34308622.32156762
90
Actual reward of current solution: 50448448.65212414
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7603907 NZs
  Matrix coefficient range    : [ 1.00265e-13, 1 ]
  Objective coefficient range : [ 1.3152e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 20.946 ]
  RHS coefficient range       : [ 1.31295e-07, 99.2179 ]
Objective value for Line heur k = 0: 35315281.00725255
90
Actual reward of current solution: 50548283.86614979
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8744657 NZs
  Matrix coefficient range    : [ 1.00186e-13, 1 ]
  Objective coefficient range : [ 1.70041e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 25.9069 ]
  RHS coefficient range       : [ 9.32055e-08, 99.2179 ]
Objective value for Line heur k = 0: 35184234.80630665
90
Actual reward of current solution: 50634817.2195173
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8517073 NZs
  Matrix coefficient range    : [ 1.01616e-13, 1 ]
  Objective coefficient range : [ 1.32514e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 30.8678 ]
  RHS coefficient range       : [ 2.53816e-09, 99.2179 ]
Objective value for Line heur k = 0: 35105828.19363485
90
Actual reward of current solution: 50705266.512763344
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8506728 NZs
  Matrix coefficient range    : [ 1.02064e-13, 1 ]
  Objective coefficient range : [ 1.45312e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 35.8287 ]
  RHS coefficient range       : [ 1.75098e-08, 99.2179 ]
Objective value for Line heur k = 0: 34974305.970920384
90
Actual reward of current solution: 50768803.51563074
Minimum Difference with past solutions:0.10000000000000012.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8515652 NZs
  Matrix coefficient range    : [ 1.01038e-13, 1 ]
  Objective coefficient range : [ 9.60929e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.15, 40.7896 ]
  RHS coefficient range       : [ 1.56159e-07, 99.2179 ]
Objective value for Line heur k = 0: 34840654.24368334
90
Actual reward of current solution: 50834086.79350918
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8508260 NZs
  Matrix coefficient range    : [ 1.0247e-13, 1 ]
  Objective coefficient range : [ 7.04999e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.2, 45.7505 ]
  RHS coefficient range       : [ 3.82094e-07, 99.2179 ]
Objective value for Line heur k = 0: 34648466.177600555
Traceback (most recent call last):
  File "run_linearization_heuristic_targetting_value.py", line 869, in <module>
    main()
  File "run_linearization_heuristic_targetting_value.py", line 141, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, targetActivities, targetGroups, targetTests)
  File "run_linearization_heuristic_targetting_value.py", line 180, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests)
  File "run_linearization_heuristic_targetting_value.py", line 322, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1941, in run_heuristic_linearization
    Xhat_seq, uhat_seq = get_X_hat_sequence(dynModel, k, uhat_seq, use_bounce_var)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 463, in get_X_hat_sequence
    dynModel.take_time_step(m_tests, a_tests, alphas, BH, BICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 158, in take_time_step
    self.groups[n].take_time_step(m_tests[n], a_tests[n], self.beds, self.icus, B_H[n], B_ICU[n])
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 600, in take_time_step
    self.update_I(m_tests, a_tests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 684, in update_I
    assert self.I[self.parent.t]+delta_I*self.dt >= 0, (f'Total infected is negative: {self.I[self.parent.t]+delta_I*self.dt}. \n Infected time t: {self.I[self.parent.t]}. \n Delta I: {delta_I}.\n Total N time t: {self.N[self.parent.t]}.\n Total E time t: {self.E[self.parent.t]}.\n M tests at time t: {m_tests}.\n Total m_tests: {m_tests * self.dt * self.I[self.parent.t]/self.N[self.parent.t]}.\n  Total new infected: {self.dt * self.parameters["sigma"]*self.E[self.parent.t]}.\n  Total recovered or going to H, ICU: {self.dt * self.parameters["mu"]*self.I[self.parent.t]}')
AssertionError: Total infected is negative: -2.4456464192243845e-05. 
 Infected time t: 0.0014402565338000437. 
 Delta I: -0.0014647129979922875.
 Total N time t: 53.07429154498009.
 Total E time t: 0.0005474544082668886.
 M tests at time t: 45.750456993713215.
 Total m_tests: 0.0012415124666089988.
  Total new infected: 0.00013686360206672214.
  Total recovered or going to H, ICU: 0.0003600641334500109
srun: error: sh02-01n30: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=15344394.0
