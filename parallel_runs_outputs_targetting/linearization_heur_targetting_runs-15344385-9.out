{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'icus': [2900], 'eta': [0.1], 'tests': [[1116200, 0]], 'xi': [1859951.5], 'testing': ['homogeneous']}}
results/time_gradient/xi-1859951_icus-2900_testing-homogeneous_natests-0_nmtests-1116200_T-90_startday-0_groups-all_dschool-0.500000_eta-0.100000_freq-90-14.yaml
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'icus': [2900], 'eta': [0.1], 'tests': [[1116200, 0]], 'xi': [1859951.5], 'testing': ['homogeneous']}}
results/age_group_gradient/xi-1859951_icus-2900_testing-homogeneous_natests-0_nmtests-1116200_T-90_startday-0_groups-all_dschool-0.500000_eta-0.100000_freq-90-14.yaml
100
(0.5, 0.29, 111.62009085815572, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 18599515.0, 0.05, 2, 'age_group_gradient')
Total Population is: 1227.820999439713
The value of T is: 104
Missing starting point -- Running the initial heuristic.
/home/groups/daniancu/covid-optimization/covid-optimization
90
Total Reward at the start of the inner iterations: 51792557.25398853
Using license file /share/software/user/restricted/gurobi/9.0.3_py36/licenses/gurobi.lic
Set parameter TokenServer to value license4.stanford.edu
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8033275 NZs
  Matrix coefficient range    : [ 1.24202e-13, 1 ]
  Objective coefficient range : [ 1.05192e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 17.9832 ]
  RHS coefficient range       : [ 8.34663e-07, 111.62 ]
Objective value for Line heur k = 0: 32462506.70106703
90
Actual reward of current solution: 52042879.40536154
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8745441 NZs
  Matrix coefficient range    : [ 1.61221e-13, 1 ]
  Objective coefficient range : [ 6.84571e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 23.5642 ]
  RHS coefficient range       : [ 4.99645e-07, 111.62 ]
Objective value for Line heur k = 0: 34347086.119526625
90
Actual reward of current solution: 52902697.46587628
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8032811 NZs
  Matrix coefficient range    : [ 1.00332e-13, 1 ]
  Objective coefficient range : [ 6.12413e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 29.1452 ]
  RHS coefficient range       : [ 1.56315e-07, 111.62 ]
Objective value for Line heur k = 0: 36859627.05131848
90
Actual reward of current solution: 52663227.37588291
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8540297 NZs
  Matrix coefficient range    : [ 1.13424e-13, 1 ]
  Objective coefficient range : [ 7.08354e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 34.7263 ]
  RHS coefficient range       : [ 1.15528e-07, 111.62 ]
Objective value for Line heur k = 0: 36223340.464607425
90
Actual reward of current solution: 53090955.44734836
Minimum Difference with past solutions:0.10000000000000009.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7821795 NZs
  Matrix coefficient range    : [ 1.0046e-13, 1 ]
  Objective coefficient range : [ 1.29339e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 40.3073 ]
  RHS coefficient range       : [ 5.25016e-07, 111.62 ]
Objective value for Line heur k = 0: 37254231.725712456
90
Actual reward of current solution: 52697111.423394345
Minimum Difference with past solutions:0.10000000000000009.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8512196 NZs
  Matrix coefficient range    : [ 1.11997e-13, 1 ]
  Objective coefficient range : [ 1.06189e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 45.8883 ]
  RHS coefficient range       : [ 4.03844e-08, 111.62 ]
Objective value for Line heur k = 0: 36194669.09976743
90
Actual reward of current solution: 53078717.139763564
Minimum Difference with past solutions:0.10000000000000009.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7823221 NZs
  Matrix coefficient range    : [ 1.00409e-13, 1 ]
  Objective coefficient range : [ 1.16964e-18, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 51.4693 ]
  RHS coefficient range       : [ 2.93061e-07, 111.62 ]
Objective value for Line heur k = 0: 37231956.55908049
Traceback (most recent call last):
  File "run_linearization_heuristic_targetting_value.py", line 869, in <module>
    main()
  File "run_linearization_heuristic_targetting_value.py", line 141, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, targetActivities, targetGroups, targetTests)
  File "run_linearization_heuristic_targetting_value.py", line 180, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests)
  File "run_linearization_heuristic_targetting_value.py", line 322, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1941, in run_heuristic_linearization
    Xhat_seq, uhat_seq = get_X_hat_sequence(dynModel, k, uhat_seq, use_bounce_var)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 463, in get_X_hat_sequence
    dynModel.take_time_step(m_tests, a_tests, alphas, BH, BICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 158, in take_time_step
    self.groups[n].take_time_step(m_tests[n], a_tests[n], self.beds, self.icus, B_H[n], B_ICU[n])
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 600, in take_time_step
    self.update_I(m_tests, a_tests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 684, in update_I
    assert self.I[self.parent.t]+delta_I*self.dt >= 0, (f'Total infected is negative: {self.I[self.parent.t]+delta_I*self.dt}. \n Infected time t: {self.I[self.parent.t]}. \n Delta I: {delta_I}.\n Total N time t: {self.N[self.parent.t]}.\n Total E time t: {self.E[self.parent.t]}.\n M tests at time t: {m_tests}.\n Total m_tests: {m_tests * self.dt * self.I[self.parent.t]/self.N[self.parent.t]}.\n  Total new infected: {self.dt * self.parameters["sigma"]*self.E[self.parent.t]}.\n  Total recovered or going to H, ICU: {self.dt * self.parameters["mu"]*self.I[self.parent.t]}')
AssertionError: Total infected is negative: -2.413911705659332e-05. 
 Infected time t: 0.0007099730868960651. 
 Delta I: -0.0007341122039526585.
 Total N time t: 53.08422247496539.
 Total E time t: 0.0005270198011975612.
 M tests at time t: 51.46926411792735.
 Total m_tests: 0.0006883738825280325.
  Total new infected: 0.0001317549502993903.
  Total recovered or going to H, ICU: 0.00017749327172401628
srun: error: sh02-01n30: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=15344395.0
