{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'icus': [2900], 'eta': [0.1], 'tests': [[868156, 0]], 'xi': [1859951.5], 'testing': ['homogeneous']}}
results/time_gradient/xi-1859951_icus-2900_testing-homogeneous_natests-0_nmtests-868156_T-90_startday-0_groups-all_dschool-0.500000_eta-0.100000_freq-90-14.yaml
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'xi': [0, 371990.3, 929975.75, 1859951.5, 3719903, 5579854.5], 'icus': [2900], 'tests': [[60000, 0]], 'testing': ['homogeneous'], 'eta': [0.1]}}
{'groups': 'all', 'params_to_try': {'delta_schooling': [0.5], 'icus': [2900], 'eta': [0.1], 'tests': [[868156, 0]], 'xi': [1859951.5], 'testing': ['homogeneous']}}
results/age_group_gradient/xi-1859951_icus-2900_testing-homogeneous_natests-0_nmtests-868156_T-90_startday-0_groups-all_dschool-0.500000_eta-0.100000_freq-90-14.yaml
100
(0.5, 0.29, 86.81562622301003, (7, 14), 'fitted-scaled', 'econ-scaled', 'oct21-scaled', 0.1, 18599515.0, 0.05, 2, 'age_group_gradient')
Total Population is: 1227.820999439713
The value of T is: 104
Missing starting point -- Running the initial heuristic.
/home/groups/daniancu/covid-optimization/covid-optimization
90
Total Reward at the start of the inner iterations: 50128283.795123346
Using license file /share/software/user/restricted/gurobi/9.0.3_py36/licenses/gurobi.lic
Set parameter TokenServer to value license4.stanford.edu
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 7603986 NZs
  Matrix coefficient range    : [ 1.35556e-13, 1 ]
  Objective coefficient range : [ 3.43775e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 13.987 ]
  RHS coefficient range       : [ 3.11463e-08, 86.8156 ]
Objective value for Line heur k = 0: 33883901.17491832
90
Actual reward of current solution: 50273323.839155965
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8745439 NZs
  Matrix coefficient range    : [ 1.12262e-13, 1 ]
  Objective coefficient range : [ 6.93706e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 18.3277 ]
  RHS coefficient range       : [ 2.20319e-07, 86.8156 ]
Objective value for Line heur k = 0: 34005446.74260682
90
Actual reward of current solution: 50504207.47844144
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8615763 NZs
  Matrix coefficient range    : [ 1.00319e-13, 1 ]
  Objective coefficient range : [ 4.90531e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 22.6685 ]
  RHS coefficient range       : [ 5.13276e-10, 86.8156 ]
Objective value for Line heur k = 0: 34627792.04314636
90
Actual reward of current solution: 50546302.21585422
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8499921 NZs
  Matrix coefficient range    : [ 1.03482e-13, 1 ]
  Objective coefficient range : [ 1.35392e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 27.0093 ]
  RHS coefficient range       : [ 2.37339e-08, 86.8156 ]
Objective value for Line heur k = 0: 34316903.60842958
90
Actual reward of current solution: 50697020.7831888
Minimum Difference with past solutions:0.10000000000000013.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8369911 NZs
  Matrix coefficient range    : [ 1.00046e-13, 1 ]
  Objective coefficient range : [ 1.68541e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 31.3501 ]
  RHS coefficient range       : [ 3.03318e-08, 86.8156 ]
Objective value for Line heur k = 0: 34536358.44198467
90
Actual reward of current solution: 50656766.29983854
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8470264 NZs
  Matrix coefficient range    : [ 1.87981e-13, 1 ]
  Objective coefficient range : [ 1.3588e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 35.6909 ]
  RHS coefficient range       : [ 1.0766e-07, 86.8156 ]
Objective value for Line heur k = 0: 33992293.405728735
90
Actual reward of current solution: 50828191.86375963
Minimum Difference with past solutions:0.10000000000000012.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8370284 NZs
  Matrix coefficient range    : [ 1.09732e-13, 1 ]
  Objective coefficient range : [ 1.58721e-20, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 40.0316 ]
  RHS coefficient range       : [ 1.48585e-07, 86.8156 ]
Objective value for Line heur k = 0: 34283767.77014934
90
Actual reward of current solution: 50768197.68858484
Minimum Difference with past solutions:0.10000000000000005.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8468839 NZs
  Matrix coefficient range    : [ 2.26848e-13, 1 ]
  Objective coefficient range : [ 1.77232e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 40.9963 ]
  RHS coefficient range       : [ 4.38186e-08, 86.8156 ]
Objective value for Line heur k = 0: 33660462.995412916
90
Actual reward of current solution: 50970079.38001052
Minimum Difference with past solutions:0.10000000000000012.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8368860 NZs
  Matrix coefficient range    : [ 1.13662e-13, 1 ]
  Objective coefficient range : [ 9.01503e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 36.6555 ]
  RHS coefficient range       : [ 5.87508e-08, 86.8156 ]
Objective value for Line heur k = 0: 34037121.10323357
90
Actual reward of current solution: 50862412.24295881
Minimum Difference with past solutions:0.10000000000000006.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8468839 NZs
  Matrix coefficient range    : [ 2.70579e-13, 1 ]
  Objective coefficient range : [ 1.02643e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 40.9963 ]
  RHS coefficient range       : [ 9.47498e-08, 86.8156 ]
Objective value for Line heur k = 0: 33228491.0044192
90
Actual reward of current solution: 51087577.50689648
Minimum Difference with past solutions:0.1.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8368861 NZs
  Matrix coefficient range    : [ 1.08386e-13, 1 ]
  Objective coefficient range : [ 8.98649e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.05, 40.0316 ]
  RHS coefficient range       : [ 3.53895e-07, 86.8156 ]
Objective value for Line heur k = 0: 33711162.17813202
90
Actual reward of current solution: 50952703.802086316
Minimum Difference with past solutions:0.1.
Gurobi status: 2

Statistics for model Linearization Heuristic :
  Linear constraint matrix    : 17772 Constrs, 9360 Vars, 8468839 NZs
  Matrix coefficient range    : [ 3.1264e-13, 1 ]
  Objective coefficient range : [ 2.30692e-19, 2.3828e+07 ]
  Variable bound range        : [ 0.1, 44.3724 ]
  RHS coefficient range       : [ 7.92436e-08, 86.8156 ]
Objective value for Line heur k = 0: 32817108.699435584
Traceback (most recent call last):
  File "run_linearization_heuristic_targetting_value.py", line 869, in <module>
    main()
  File "run_linearization_heuristic_targetting_value.py", line 141, in main
    run_lin_heur_and_save_yaml(delta, xi, icus, mtests, atests, n_days, region, test_freq, lockdown_freq, econ, init, eta, groups, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, scaling, money_scaling, targetActivities, targetGroups, targetTests)
  File "run_linearization_heuristic_targetting_value.py", line 180, in run_lin_heur_and_save_yaml
    dynModel = run_linearization_heuristic(simulation_params, experiment_params, start_day, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests)
  File "run_linearization_heuristic_targetting_value.py", line 322, in run_linearization_heuristic
    linearization.run_heuristic_linearization(dynModel, trust_region_radius, max_inner_iterations_mult, initial_uhat, optimize_bouncing, targetActivities, targetGroups, targetTests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 1941, in run_heuristic_linearization
    Xhat_seq, uhat_seq = get_X_hat_sequence(dynModel, k, uhat_seq, use_bounce_var)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/heuristics/linearization.py", line 463, in get_X_hat_sequence
    dynModel.take_time_step(m_tests, a_tests, alphas, BH, BICU)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 158, in take_time_step
    self.groups[n].take_time_step(m_tests[n], a_tests[n], self.beds, self.icus, B_H[n], B_ICU[n])
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 600, in take_time_step
    self.update_I(m_tests, a_tests)
  File "/home/groups/daniancu/covid-optimization/covid-optimization/group.py", line 684, in update_I
    assert self.I[self.parent.t]+delta_I*self.dt >= 0, (f'Total infected is negative: {self.I[self.parent.t]+delta_I*self.dt}. \n Infected time t: {self.I[self.parent.t]}. \n Delta I: {delta_I}.\n Total N time t: {self.N[self.parent.t]}.\n Total E time t: {self.E[self.parent.t]}.\n M tests at time t: {m_tests}.\n Total m_tests: {m_tests * self.dt * self.I[self.parent.t]/self.N[self.parent.t]}.\n  Total new infected: {self.dt * self.parameters["sigma"]*self.E[self.parent.t]}.\n  Total recovered or going to H, ICU: {self.dt * self.parameters["mu"]*self.I[self.parent.t]}')
AssertionError: Total infected is negative: -2.108938421343902e-06. 
 Infected time t: 0.002875476760039006. 
 Delta I: -0.00287758569846035.
 Total N time t: 52.999259877300446.
 Total E time t: 0.0009948453955102657.
 M tests at time t: 44.37243118064956.
 Total m_tests: 0.002407427857328165.
  Total new infected: 0.0002487113488775664.
  Total recovered or going to H, ICU: 0.0007188691900097515
srun: error: sh02-01n30: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=15344393.0
